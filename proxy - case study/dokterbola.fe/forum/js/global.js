/*=======================================================================*\
|| ###################################################################### ||
|| # vBulletin 5.2.3
|| # ------------------------------------------------------------------ # ||
|| # Copyright 2000-2016 vBulletin Solutions Inc. All Rights Reserved.  # ||
|| # This file may not be redistributed in whole or significant part.   # ||
|| # ----------------- VBULLETIN IS NOT FREE SOFTWARE ----------------- # ||
|| # http://www.vbulletin.com | http://www.vbulletin.com/license.html   # ||
|| ###################################################################### ||
\*========================================================================*/
(function(C){if(typeof window.console!="object"){window.console={}}var D=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"];for(var B=0;B<D.length;B++){if(typeof window.console[D[B]]!="function"&&typeof window.console[D[B]]!="object"){window.console[D[B]]=function(){}}}if(!Object.keys){Object.keys=(function(){var H=Object.prototype.hasOwnProperty,I=!({toString:null}).propertyIsEnumerable("toString"),G=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],F=G.length;return function(L){if(typeof L!=="object"&&typeof L!=="function"||L===null){throw new TypeError("Object.keys called on non-object")}var J=[];for(var M in L){if(H.call(L,M)){J.push(M)}}if(I){for(var K=0;K<F;K++){if(H.call(L,G[K])){J.push(G[K])}}}return J}})()}C(".js-module__hide-if-empty:not(:has(*))").each(function(){var F=C(this);if(/\s/.test(F.html())){F.closest(".js-module").hide()}});C.ajaxPrefilter("script",function(F){F.cache=true});window.vBulletin.normalizeAjaxUrl=function(F){if(F.indexOf("http://")==0){return F.substring(5)}else{if(F.indexOf("https://")==0){return F.substring(6)}else{return F}}};vBulletin.getAbsoluteUrl=(function(){var F;return function(G){if(!F){F=document.createElement("a")}F.href=G;return F.href}})();vBulletin.isInternalUrl=(function(){var G=function(I){return I.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},F=vBulletin.normalizeAjaxUrl(pageData.baseurl),H=new RegExp("^"+G(F));return function(I){I=vBulletin.normalizeAjaxUrl(vBulletin.getAbsoluteUrl(I));return H.test(I)}})();C.ajaxPrefilter(function(F,J,H){if(F.url&&!vBulletin.isInternalUrl(F.url)){console.log("Skipping security token for external url: "+F.url);return }if(typeof (F.data)=="undefined"){F.data="securitytoken="+pageData.securitytoken;if(typeof F.formData!=="undefined"){if(Array.isArray(F.formData)){F.formData.push({name:"securitytoken",value:pageData.securitytoken})}}}else{if(typeof FormData!=="undefined"&&F.data instanceof FormData){F.data.append("securitytoken",pageData.securitytoken)}else{var G=true;var I=F.data.split("&");C.each(I,function(K,L){if(L.match(/^securitytoken=/)){G=false;return false}});if(G){F.data+="&securitytoken="+pageData.securitytoken}}}});C.ajaxPrefilter(function(F,H,G){(function(){var J=vBulletin.getAjaxBaseurl();if((H.url.indexOf(J)==0&&H.url.substr(J.length).indexOf("/ajax/render/")==0)||(H&&H.data&&H.data.isAjaxTemplateRender)){var I=F.success;F.success=function(){console.log("Intercept AJAX template render calls: Start (URL: {0})".format(F.url));var P=arguments[0];if(!P||typeof P!="object"||C.isEmptyObject(P)){if(typeof I=="function"){return I.apply(this,arguments)}return false}if(H.data&&H.data.isAjaxTemplateRenderWithData){arguments[0]=P}else{arguments[0]=P.template}var U=P.css_links;if(!U||U.length==0){console.log("Intercept AJAX template render calls: No CSS");if(typeof I=="function"){console.log("Intercept AJAX template render calls: Calling original success handler");return I.apply(this,arguments)}}else{console.log("Intercept AJAX template render calls: Has CSS");var O=/sheet=([^&]+)&/,W=U.pop(),R=(W.match(O)!=null);U.push(W);var K=function(Y){var Z=Y.match(O);var X={};if(Z&&Z[1]){C.each(Z[1].split(","),function(a,b){X[b]=Y})}else{X[Y.replace(/^.*\//g,"")]=Y}return X};var Q={};C("head link[rel=stylesheet]").each(function(){C.extend(Q,K(C(this).attr("href")))});var T={};C.each(U,function(X,Y){C.extend(T,K(Y))});var V=[];C.each(T,function(X,Y){if(X&&typeof Q[X]=="undefined"){if(R){V.push(X)}else{V.push(Y)}}});if(V.length==0){console.log("Intercept AJAX template render calls: Needed CSS is already on the page");if(typeof I=="function"){console.log("Intercept AJAX template render calls: Calling original success handler");return I.apply(this,arguments)}}else{var M=[];if(R){console.log("Intercept AJAX template render calls: found DB CSS");M.push(W.replace(/sheet=[^&]+&/,"sheet="+V.join(",")+"&"))}else{console.log("Intercept AJAX template render calls: found FS CSS");M=V}var L=this,S=arguments;console.log("Intercept AJAX template render calls: Fetching CSS: {0}".format(M.join(", ")));var N=function(Y){if(Y.length==0){console.log("Intercept AJAX template render calls: Done. Calling original callback.");window.setTimeout(function(){if(typeof I=="function"){return I.apply(L,S)}},50);return }var X=C("<div />").append(Y.shift()).text();console.log("Intercept AJAX template render calls: Fetching CSS file: {0}".format(X));C.get(X,{cache:true},function(a){var Z=C("<link />",{rel:"stylesheet",type:"text/css",href:X}),b=C(".js-additional-css");if(b.length==1){b.before(Z)}else{C("head").append(Z)}}).then(function(){console.log("Intercept AJAX template render calls: Fetched CSS file: {0}".format(X));if(C(".js-debug-css-template-list").length>0){var a=K(X),Z=C("<ol />");C.each(a,function(d,e){if(R){Z.append(C("<li />").append(d))}else{Z.append(C("<li />").append(e))}});var b=C(".js-debug-css-template-list").append(C("<li />").append(vBulletin.phrase.get("added_via_ajax_call")+":").append(Z));var c=b.prev("b");c.text(parseInt(c.text(),10)+1)}N(Y)},function(){console.warn("Intercept AJAX template render calls: Failed to fetch CSS file: {0}".format(X));N(Y)})};N(M)}}}}})()});String.prototype.format=function(){var G=this,F=arguments.length;while(F--){G=G.replace(new RegExp("\\{"+F+"\\}","gm"),arguments[F])}return G};jQuery.fn.reverse=[].reverse;window.vBulletin=window.vBulletin||{};vBulletin.getStackTrace=function(){var F=new Error();return F.stack};vBulletin.cookie=vBulletin.cookie||{};vBulletin.cookie.convertBbarrayCookie=function(G,F){G=G||"";F=F||"get";if(F=="set"){G=G.replace(/"/g,".");G=G.replace(/:/g,"-");G=G.replace(/;/g,"_")}else{G=G.replace(/\./g,'"');G=G.replace(/-/g,":");G=G.replace(/_/g,";")}return G};vBulletin.cookie.fetchBbarrayCookie=function(F,I){if(typeof vBulletin.cookie.bbarraycookiecache=="undefined"){vBulletin.cookie.bbarraycookiecache={}}var G=C.cookie(pageData.cookie_prefix+F);if(G!=""&&!vBulletin.cookie.bbarraycookiecache[F]){try{vBulletin.cookie.bbarraycookiecache[F]=C.parseJSON(vBulletin.cookie.convertBbarrayCookie(G))}catch(H){vBulletin.cookie.bbarraycookiecache[F]=null}}if(vBulletin.cookie.bbarraycookiecache[F]){return vBulletin.cookie.bbarraycookiecache[F][I]?vBulletin.cookie.bbarraycookiecache[F][I]:null}else{return null}};vBulletin.cookie.setBbarrayCookie=function(F,L,H,J){if(typeof vBulletin.cookie.bbarraycookiecache=="undefined"){vBulletin.cookie.bbarraycookiecache={}}var G=C.cookie(pageData.cookie_prefix+F);if(G!=""&&!vBulletin.cookie.bbarraycookiecache[F]){try{vBulletin.cookie.bbarraycookiecache[F]=C.parseJSON(vBulletin.cookie.convertBbarrayCookie(G))}catch(I){vBulletin.cookie.bbarraycookiecache[F]=null}}if(!vBulletin.cookie.bbarraycookiecache[F]){vBulletin.cookie.bbarraycookiecache[F]={}}vBulletin.cookie.bbarraycookiecache[F][L]=H;var K={path:pageData.cookie_path,domain:pageData.cookie_domain};if(J){K.expires=365}C.cookie(pageData.cookie_prefix+F,vBulletin.cookie.convertBbarrayCookie(JSON.stringify(vBulletin.cookie.bbarraycookiecache[F]),"set"),K)};vBulletin.cookie.unsetBbarrayCookie=function(F,J){if(typeof vBulletin.cookie.bbarraycookiecache=="undefined"){vBulletin.cookie.bbarraycookiecache={}}var G=C.cookie(pageData.cookie_prefix+F);if(G!=""&&!vBulletin.cookie.bbarraycookiecache[F]){try{vBulletin.cookie.bbarraycookiecache[F]=C.parseJSON(vBulletin.cookie.convertBbarrayCookie(G))}catch(H){vBulletin.cookie.bbarraycookiecache[F]=null}}if(!vBulletin.cookie.bbarraycookiecache[F]||!vBulletin.cookie.bbarraycookiecache[F][J]){return }delete vBulletin.cookie.bbarraycookiecache[F][J];var I={path:pageData.cookie_path,domain:pageData.cookie_domain};C.cookie(pageData.cookie_prefix+F,vBulletin.cookie.convertBbarrayCookie(JSON.stringify(vBulletin.cookie.bbarraycookiecache[F]),"set"),I)};(function(){var F=jQuery.fn.dialog;jQuery.fn.dialog=function(){if(typeof arguments[0]=="object"){var G=false;if(typeof arguments[0].open=="function"){G=arguments[0].open}arguments[0].open=function(){window.setTimeout(function(){vBulletin.Responsive.Debounce.runCallbacks()},0);if(G){return G.apply(this,arguments)}}}return F.apply(this,arguments)}})();(function(){var F=jQuery.fn.selectBox;jQuery.fn.selectBox=function(){var G=C(this);if(typeof G.attr("tabindex")=="undefined"){G.attr("tabindex","0")}return F.apply(this,arguments)}})();(function A(){(function(){var G="b_menu__dropdown--active",J=".js-menu__username-iconcontainer",I=".js-menu__dropdown-submenu",F=function(K){C(I,K).slideUp("fast");C(J,K).addClass("expand").removeClass("collapse");K.removeClass(G)},H=function(L){var K=C(".js-menu__login-iframe");K.closest("ul").show();K.trigger("load");K.closest("ul").hide();$subList=C("> ul",L);C(J,L).addClass("collapse").removeClass("expand");L.addClass(G);C(I,L).css("top",L.outerHeight()).slideDown("fast",function(){K.contents().find(".js-login-username").focus()});L.trigger("event-js-menu__dropdown__open")};C("#main-navbar .secondary-nav").removeClass("h-disabled");C(".js-menu__login-iframe").on("load",function(O){try{var N=C(this),M=N.contents().find("html")[0],K=M.scrollHeight;if(K>0){N.height(K);N.parent().height(K)}}catch(L){}});C("#main-navbar .js-menu__dropdown").on("click",function(M){var N=C(this),L=C("> ul",N);if(N.hasClass("h-disabled")||N.closest(".secondary-nav").hasClass("h-disabled")){return false}if(N.hasClass(G)){M.stopPropagation();try{M.target.parentNode.click()}catch(K){}F(N);return true}else{C("#main-navbar .js-menu__dropdown."+G).each(function(O){console.log("Closing this:");console.log(C(this));F(C(this))})}H(N);return false});C("body").on("click",function(K){if(C(K.target).closest(".js-menu__dropdown").size()==0){F(C(".js-menu__dropdown"))}})})();C(".ui-tabs .ui-tabs-nav > li").addClass("ui-state-disabled");C(".announcement-tabs .ui-tabs-nav > li").removeClass("ui-state-disabled")})();window.vBulletin.getAjaxBaseurl=function(){if(pageData.baseurl.indexOf("http://")==0){return pageData.baseurl.substring(5)}else{if(pageData.baseurl.indexOf("https://")==0){return pageData.baseurl.substring(6)}else{return pageData.baseurl}}};window.vBulletin.runBeforeCallback=function(H,G){if(C.isArray(H)){H.unshift(G)}else{var F=H;H=function(){G.apply(this,arguments);if(typeof F=="function"){F.apply(this,arguments)}}}return H};window.vBulletin.pageHasSelectors=function(F){if(C.isArray(F)&&F.length>0&&C.trim(F.toString())!=""){var G=false;C.each(F,function(H,I){if(C(I).length>0){G=true;return false}});return G}return true};window.vBulletin.areJsonObjectsEqual=function(H,F){var G=function(K,J){for(var I in K){if(K.hasOwnProperty(I)&&J.hasOwnProperty(I)){var M=K[I],L=J[I];if(M!=L){if(M instanceof Array&&L instanceof Array){if(C(M).not(L).length>0||C(L).not(M).length>0){return false}else{continue}}else{return false}switch(M.constructor){case Object:if(!window.vBulletin.areJsonObjectsEqual(M,L)){return false}break;case Function:if(M.toString()!=L.toString()){return false}break;default:return false}}}else{return false}}return true};return(Object.keys(H).length==Object.keys(F).length)?G(H,F):false};window.vBulletin.ajaxSetup=(function(){var F=false;return{init:function(){if(F){return }F=true;C.ajaxSetup({contentType:"application/x-www-form-urlencoded; charset=UTF-8"})}}})();window.vBulletin.ajaxSetup.init();window.vBulletin.ajaxProfile=(function(){var H=[],I=false,G=true,F=false;return{init:function(){if(I){return }I=true;C(function(){if(C("#debug-information").length==0){G=false}C("<ol />").attr("id","debug-ajax-request-list").hide().css({height:"150px",overflow:"auto",padding:"4px",border:"1px solid #CCC",background:"#EEE","margin-top":"2px","margin-bottom":"4px"}).appendTo(C("#debug-information #debug-ajax-request-count").closest("li"));C("#debug-information #debug-ajax-request-count").css("cursor","pointer").on("click",function(){C("#debug-ajax-request-list").toggle()});F=true});function J(){if(F){C("#debug-information #debug-ajax-request-count").text(H.length);C.each(H,function(){if(!this.displayed){this.displayed=true;this.relUrl=this.url.indexOf(pageData.baseurl)==0?this.url.substring(pageData.baseurl.length):this.url;C("<li />").addClass("js-request-counter-"+this.requestCounter).text(this.relUrl).appendTo(C("#debug-ajax-request-list"))}var K=this.totalTimeTaken-this.networkTimeTaken;var L='{0} <span style="font-size:x-small;">({1}, <span title="Request Time: {2}ms, Processing Time: {3}ms, Total Time: {4}ms" style="text-decoration:underline;">{2}ms, {3}ms</span>){5}</span>'.format(this.relUrl,this.status,this.networkTimeTaken,K,this.totalTimeTaken,(this.errorThrown?" Error: "+this.errorThrown:""));C("#debug-ajax-request-list .js-request-counter-"+this.requestCounter).html(L)})}}C.ajaxPrefilter(function(K,N,L){if(!G){return }var M=H.length;console.log("vBulletin AJAX profile: Before request #"+M);H.push({displayed:false,url:K.url,relUrl:"",startTimeStamp:(new Date()).getTime(),endTimeStamp:0,finalTimeStamp:0,textStatus:"UNKNOWN",errorThrown:"",requestCounter:M,networkTimeTaken:0,totalTimeTaken:0});K.success=vBulletin.runBeforeCallback(K.success,function(P,Q,O){H[M].endTimeStamp=(new Date()).getTime()});K.error=vBulletin.runBeforeCallback(K.error,function(O,Q,P){H[M].endTimeStamp=(new Date()).getTime();H[M].errorThrown=P});K.complete=vBulletin.runBeforeCallback(K.complete,function(O,P){H[M].finalTimeStamp=(new Date()).getTime();H[M].status=P;H[M].networkTimeTaken=H[M].endTimeStamp-H[M].startTimeStamp;H[M].totalTimeTaken=H[M].finalTimeStamp-H[M].startTimeStamp;J()})})}}})();window.vBulletin.ajaxProfile.init();window.vBulletin.loadingIndicator=(function(){var K=0,J=false,I=false,G=0,F=0;function H(M){if(M){var O=C(".js-loading-indicator"),N=O.outerWidth(),L=C(window).outerWidth();if(L>0&&N>0){O.css("left",((L-N)/2))}O.show();C("body").css("cursor","wait")}else{C(".js-loading-indicator").hide();C("body").css("cursor","auto")}}return{init:function(){if(J){return }C(document).ajaxStart(function(){window.vBulletin.loadingIndicator.show("ajaxStart")});C(document).ajaxStop(function(){window.vBulletin.loadingIndicator.hide("ajaxStop")});J=true},show:function(L){if(G>0&&L=="ajaxStart"){--G;++F;console.log("vBulletin.loadingIndicator.show ajax indicator suppressed");return }++K;console.log("vBulletin.loadingIndicator.show Counter: "+K+" Source: "+(L||"Unspecified"));if(K>0){I=window.setTimeout(function(){if(I){H(true);I=false}},1000)}},hide:function(L){if(F>0&&L=="ajaxStop"){--F;console.log("vBulletin.loadingIndicator.hide ajax indicator suppressed");return }--K;K=K<0?0:K;if(!L){K=0}console.log("vBulletin.loadingIndicator.hide Counter: "+K+" Source: "+(L||"Unspecified"));if(K<1){if(I){window.clearTimeout(I);I=false}H(false)}},suppressNextAjaxIndicator:function(){++G}}})();window.vBulletin.phrase=window.vBulletin.phrase||{};window.vBulletin.phrase.precache=window.vBulletin.phrase.precache||["alert","cancel","confirmation","no","ok","prompt","yes"];window.vBulletin.phrase.cache=window.vBulletin.phrase.cache||{};window.vBulletin.phrase.uncachable=window.vBulletin.phrase.uncachable||[];window.vBulletin.phrase.render=function(F){var H=F[0];for(var G=1;G<F.length;++G){H=H.replace(new RegExp("%"+G+"\\$s","gm"),F[G])}return H};window.vBulletin.phrase.remoteGet=function(G,I){I.push(G);var H=[];var F=G;C.each(I,function(K,J){if(C.inArray(J,H)===-1&&J!=""){H.push(J)}});if(H.length>0){vBulletin.loadingIndicator.suppressNextAjaxIndicator();C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/phrase/fetch",async:false,data:({phrases:H}),type:"POST",dataType:"json",success:function(J){if(J){if(typeof (J[G])!="undefined"){F=J[G]}window.vBulletin.cache.setBucket("phrases"+pageData.languageid);C.each(J,function(L,K){window.vBulletin.cache.set(L,K)});I.length=0}else{console.warn("Unexpected result when fetching phrases")}},error:function(L,K,J){console.warn("Error when fetching phrases: {0}".format(J))}})}return F};window.vBulletin=window.vBulletin||{};window.vBulletin.phrase=window.vBulletin.phrase||{};window.vBulletin.phrase.precache=window.vBulletin.phrase.precache||[];window.vBulletin.phrase.precache=C.merge(window.vBulletin.phrase.precache,["admin","admin_auth","all_changes_made_will_be_lost_would_you_like_to_continue","april","attach_link","attach_video","august","cancel","cancel_edit","close","compare_versions","conversation","december","done","edit_conversation","email_addresses_must_match","error","error_fetching_online_users_x","error_loading_ckeditor_script","error_loading_editor","error_loading_post","error_posting_comment_code_x","error_saving_vote","error_x","existing_reply_will_be_deleted","february","flag_a_post","follow","follow_error","following","following_pending","following_remove","friday_min","go_to_first_new_post","hour","inlinemod_auth_login_failed","inlinemod_auth_login_first","inlinemod_auth_password_empty","invalid_data","invalid_data_requested","invalid_email_address","invalid_request","invalid_server_response_please_try_again","invalid_special_channel_subscribe_request","invalid_user_permissions","invalid_username_specified","invalid_username_specified_maxlength_x","invalid_username_specified_minlength_x","invalid_query_definition_x","january","join","joined","join_error","july","june","leave","loading","logged_out_while_editing_post","login","login_success_admin_auth","march","may","minute","moderator","monday_min","new_posts","no","no_create_permissions","no_icon","no_leave_channel_permission","no_one_voted","no_permission","no_update_permissions","no_valid_tags_found","not_logged_no_permission","november","now","october","onbeforeunload_message_while_editing_post","password_must_be_at_least_four_chars","passwords_must_match","people_who_liked","physically_remove_blog","physically_remove_comment","physically_remove_media","physically_remove_reply","physically_remove_topic","physically_remove_visitorMessage","please_enter_a_username","please_enter_a_valid_url_and_click_attach","please_enter_link_url","please_enter_video_url","please_enter_your_comment","please_enter_your_email_address","please_enter_your_reason_why_you_want_to_flag_this_post","please_provide_search_string","please_select_a_day","please_select_a_month","please_select_a_year","post_comment","post_history","posttype_blog","posttype_comment","posttype_media","posttype_reply","posttype_topic","posttype_visitorMessage","preview","saturday_min","search","see_less","see_more","select_option_and_click_delete_button_blog","select_option_and_click_delete_button_comment","select_option_and_click_delete_button_media","select_option_and_click_delete_button_reply","select_option_and_click_delete_button_topic","select_option_and_click_delete_button_visitorMessage","send_report","september","share_post_link_help","soft_delete_blog","soft_delete_comment","soft_delete_media","soft_delete_notes_blog","soft_delete_notes_comment","soft_delete_notes_media","soft_delete_notes_reply","soft_delete_notes_topic","soft_delete_notes_visitorMessage","soft_delete_reply","soft_delete_topic","soft_delete_visitorMessage","sunday_min","thanks_for_signing_up_log_in","the_report_has_been_sent","time","tuesday_min","thursday_min","unable_to_check_admin_permissions","unexpected_error","unfollow_error","unsubscribe","unsubscribe_overlay_error","unvote_cap","user_name_x_already_in_use_choose_different_name","vote_a_post","vote_cap","wednesday_min","xs_avatar","yes","you_have_a_pending_edit_unsaved"]);window.vBulletin.cache.initBucket("phrases"+pageData.languageid,pageData.phrasedate,window.vBulletin.phrase.precache,window.vBulletin.phrase.remoteGet);window.vBulletin.phrase.get=function(){if(arguments.length<1){console.log("vBulletin.phrase.get() called with no parameters");return""}if(typeof arguments[0]=="object"){arguments=arguments[0]}window.vBulletin.cache.setBucket("phrases"+pageData.languageid);var F=window.vBulletin.cache.get(arguments[0]);arguments[0]=F;return window.vBulletin.phrase.render(arguments)};window.vBulletin.getScrollbarWidth=function(){if(C("body").data("scrollbar-width")){return C("body").data("scrollbar-width")}var F=C('<div style="width:50px;height:50px;overflow:auto;position:absolute;top:-99999px;"><div /></div>').appendTo("body"),H=F.children(),G=H.innerWidth()-H.height(99).innerWidth();F.remove();C("body").data("scrollbar-width",G);return G};window.vBulletin.options=window.vBulletin.options||{};window.vBulletin.options.precache=window.vBulletin.options.precache||[];window.vBulletin.options.remoteGet=function(G,I){var H=[G];C.each(I,function(K,J){if(C.inArray(J,H)===-1){H.push(J)}});var F=null;C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/options/fetchValues",async:false,data:({options:H}),type:"POST",dataType:"json",success:function(J){if(J){vBulletin.cache.setBucket("options");C.each(J,function(K,L){if(K==G){F=L}vBulletin.cache.set(K,L)});I.length=0}else{console.warn("Unexpected result when fetching options")}},error:function(L,K,J){console.warn("Error when fetching options: {0}".format(J))}});return F};window.vBulletin=window.vBulletin||{};window.vBulletin.options=window.vBulletin.options||{};window.vBulletin.options.precache=window.vBulletin.options.precache||[];window.vBulletin.options.precache=C.merge(window.vBulletin.options.precache,["crontab","bbtitle","markinglimit","threadpreview"]);vBulletin.cache.initBucket("options",window.pageData.optionsdate,window.vBulletin.options.precache,window.vBulletin.options.remoteGet);window.vBulletin.options.get=function(F){window.vBulletin.cache.setBucket("options");return window.vBulletin.cache.get(F)};window.vBulletin.openAuthDialog=function(J,I,F,G){I=I||"inlinemod_auth";F=F||function(){};var H=openConfirmDialog({title:vBulletin.phrase.get(I),message:vBulletin.phrase.get("loading")+"...",width:500,dialogClass:"inlinemod-auth-dialog loading",buttonLabel:{yesLabel:vBulletin.phrase.get("login"),noLabel:vBulletin.phrase.get("cancel")},onClickYesWithAjax:true,onClickYes:function(){var L=H.find(".inlinemod-auth-form"),M=C(".js-inlineauth_password").val(),N=C(".js-inlineauth_username").val(),K=C(".error-msg-box");K.text("").addClass("h-hide");vBulletin.AJAX({url:vBulletin.normalizeAjaxUrl(L.attr("action")),data:{password:M,username:N},success:function(O){vBulletin.doReplaceSecurityToken(O.newtoken);H.dialog("close");if(typeof (G)=="function"){G()}return J()},api_error:function(O){K.text(vBulletin.phrase.get(O[0])).removeClass("h-hide")}})},onClickNo:F});C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/render/inlinemod_auth",type:"POST",dataType:"json",success:function(K){console.log("/ajax/render/inlinemod_auth");if(K&&!K.errors){C(".inlinemod-auth-dialog").removeClass("loading");C(".dialog-content .message",H).html(K);H.dialog("option","position",{of:window});C('[name="password"]',H).on("keydown",function(L){if(L.which==13){L.preventDefault();C("#btnConfirmDialogYes",H).click()}});C("input",H).first().focus()}else{console.log("/ajax/render/inlinemod_auth successful, but response was not valid");openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("invalid_server_response_please_try_again"),iconType:"error",onAfterClose:function(){H.dialog("close")}})}},error:function(M,L,K){console.log("/ajax/render/inlinemod_auth failed, error: "+K);openAlertDialog({title:vBulletin.phrase.get(I),message:vBulletin.phrase.get("error_loading_delete_form"),iconType:"error",onAfterClose:function(){H.dialog("close")}})}})};window.vBulletin.assertUserHasAdminPermission=function(J,I,F,G){if(C(I).data("in-progress")){return false}C("body").css("cursor","wait");var H=arguments.callee.caller;C(I).data("in-progress",true);C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/user/currentUserHasAdminPermission",data:({adminPermission:J}),type:"POST",dataType:"json",complete:function(){C("body").css("cursor","auto");C(I).data("in-progress",null)},success:function(K){console.log("ajax/api/user/currentUserHasAdminPermission result:"+JSON.stringify(K));if(K===true){F()}else{if(K&&K.errors&&K.errors.length>0){if(K.errors[0]=="auth_required"){window.vBulletin.openAuthDialog(function(){H.apply(I)},"admin_auth",function(){},G);return }openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("nopermission_loggedout"),iconType:"error",onAfterClose:function(){C("#config-dialog").dialog("close");window.location.reload()}});C("#config-dialog .loader").hide()}else{openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("unable_to_check_admin_permissions"),iconType:"error",onAfterClose:function(){C("#config-dialog").dialog("close");window.location.reload()}});C("#config-dialog .loader").hide()}}},error:function(M,L,K){console.log("ajax/api/user/currentUserHasAdminPermission error: "+K);openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("unable_to_check_admin_permissions"),iconType:"error",onAfterClose:function(){C("#config-dialog").dialog("close");window.location.reload()}});C("#config-dialog .loader").hide()}})};vBulletin.selectTabByIndex=function(F){var G=this instanceof C?this:C(this);if(G.length&&F>-1&&G.hasClass("ui-tabs")){G.data("noPushState",true).tabs("option","active",F).data("noPushState",null).find(".ui-tabs-nav li").removeClass("ui-state-focus").eq(F).addClass("ui-state-focus").find("a").focus()}};C.ui.tabs.prototype._isLocal=function(){return true};vBulletin.tabify=function(G){var H=this instanceof C?this:C(this);if(H.length){var F={tabOptions:{},tabHistory:null,allowHistory:false,tabParamAsQueryString:true,hash:"",getTabIndexByHash:function(){return -1}};G=C.extend({},F,G);if(G.tabHistory instanceof vBulletin.history.instance&&G.tabHistory.isEnabled()){H.on("tabscreate",function(L,N){var I=vBulletin.parseQueryString(location.search,["_"]),O=Object.keys(I).length,K=vBulletin.getSelectedTabHashOrPath(H,G.tabParamAsQueryString),M=G.tabHistory.getState();if(((G.tabParamAsQueryString&&O>1&&typeof I.tab!="undefined")||(!G.tabParamAsQueryString&&O>0))&&(!M||C.isEmptyObject(M.data))){var J={from:"tabs",tab:K};G.tabHistory.setDefaultState(J,document.title,location.href)}G.tabHistory.setStateChange(function(U){var T=G.tabHistory.getState();if(T.data.from=="tabs"){G.tabHistory.log(T.data,T.title,T.url);var R=G.getTabIndexByHash(T.data.tab),P=vBulletin.parseQueryString(T.url,["tab","_"]);if(H.tabs("option","selected")!=R){vBulletin.selectTabByIndex.call(H,R);if(!C.isEmptyObject(P)){C(window).trigger("statechange.filter",["tabs",P])}}else{if(!C.isEmptyObject(P)){C(window).trigger("statechange.filter",["tabs",P])}else{var Q,S,V;if(T.data.tab){S=G.tabParamAsQueryString?C(T.data.tab):C('.ui-tabs .ui-tabs-panel[data-url-path="'+T.data.tab+'"]')}Q=(S&&S.length&&S)||C(H.closest(".canvas-widget").data("widget-default-tab"));V=C(".toolbar-filter-overlay .filter-options .js-default-checked",Q);if(V.length){V.prop("checked",true).first().data("bypass-filter-display",true).trigger("change",[true]).data("bypass-filter-display",null);C(".filtered-by",Q).addClass("h-hide").find(".filter-text-wrapper").empty()}else{C(".conversation-toolbar .js-default-checked",Q).first().trigger("click",[true])}}}}},"tabs");if(typeof G.tabOptions.create=="function"){G.tabOptions.create.call(H[0],L,N)}})}if(G.allowHistory&&G.tabHistory instanceof vBulletin.history.instance){H.on("tabsbeforeactivate",function(N,O){var I=O.newPanel,L=O.newTab;if(typeof G.tabOptions.beforeActivate=="function"&&G.tabOptions.beforeActivate.call(this,N,O)===false){return false}var K,P=(G.tabParamAsQueryString?I.selector:C(L.context).data("url-path")),M=G.tabParamAsQueryString?undefined:H.find(".ui-tabs-nav > li > a").map(function(){return C(this).data("url-path")}).get();if(!G.tabHistory.isEnabled()){K=vBulletin.makeFilterUrlFromSelectedFilters(I,P.replace("#",""),G.tabParamAsQueryString,M,G.hash);location.href=K;return false}if(!H.data("noPushState")){var J={from:"tabs",tab:P};K=vBulletin.makeFilterUrlFromSelectedFilters(I,P.replace("#",""),G.tabParamAsQueryString,M);G.tabHistory.pushState(J,document.title,K)}else{H.data("noPushState",null)}})}H.tabs(G.tabOptions)}return H};vBulletin.getSelectedTabHashOrPath=function(G,H){var F;if(H){F=G.find(".ui-tabs-nav > .ui-tabs-active > a").prop("hash")}else{F=G.find(".ui-tabs-nav > .ui-tabs-active > a").data("url-path")}return F||""};vBulletin.parseUrl=function(G){var F=document.createElement("a"),H;F.href=G||"/";H=F.pathname;if(H.indexOf("/")!=0){H="/"+H}return{protocol:F.protocol,hostname:F.hostname,port:F.port,pathname:H,search:F.search,hash:F.hash}};vBulletin.makeHistoryUrl=function(K,F,I,G,J){var H=vBulletin.makePaginatedUrl(K,F);H=vBulletin.makeTabUrl(H,I.tab,I.tabParamAsQueryString);H=vBulletin.makeFilterUrl(H,G.filterName,G.filterValue,G.context,J);return H};vBulletin.makeTabUrl=function(G,I,M,K,J){if(G){var L=vBulletin.parseUrl(G),N;if(M){J=J||"tab";N=new RegExp("([?+|&+])"+J+"=\\w+[-\\w]*","i");if(L.search.match(N)){G=L.pathname+L.search.replace(N,"$1{0}={1}".format(J,I))}else{if(L.search){G="{0}{1}&{2}={3}".format(L.pathname,L.search,J,I)}else{G="{0}?{1}={2}".format(L.pathname,J,I)}}}else{var H=L.pathname.replace(/\/$/,""),F=H.split("/");N="\\/"+F[F.length-(H.match(/\/page([0-9]+)/)?2:1)]+"$";G=L.pathname.replace(new RegExp(N),"/"+I)+L.search}}else{G="/"}if(K){G+="#"+K}return G};vBulletin.makePaginatedUrl=function(H,G){if(H){var F=H.match(/\/page[0-9]+/);if(F){if(G>1){H=H.replace(F[0],"/page"+G)}else{H=H.replace(F[0],"")}}else{if(G>1){if(H.match(/\?/)){H=H.replace(/\?/,"/page"+G+"?")}else{if(H.match(/\#/)){H=H.replace(/\#.*/,"/page"+G)}else{H+="/page"+G}}}}}return H};vBulletin.makeFilterUrl=function(F,K,O,G,J,H){H=H||false;F=F||location.href;var P=C(".filtered-by",G),M=vBulletin.parseUrl(F),Q=M.search;var L=C(".js-button-filter.js-default-checked.js-checked",G);if(L.data("filter-name")==K&&L.data("filter-value")==O){H=true}if(!H&&((P.data("clicked")&&C('.toolbar-filter-overlay input[name="{0}"][value="{1}"]'.format(K,O),G).hasClass("js-default-checked"))||(C('.toolbar-search-form input[name="{0}"]'.format(K),G).length&&!O))){H=true;P.data("clicked",null)}F=M.pathname;if(Q&&Q.length>1){if(Q.match(new RegExp(K+"=","i"))){var I=vBulletin.parseQueryString(Q);if(!C.isEmptyObject(I)){var N="";C.each(I,function(R,S){if(!H||R!=K){N+="{0}={1}&".format(R,(R==K?O:S))}});if(N){F+="?"+N.substring(0,N.length-1)}}}else{if(!H){F+=Q+"&{0}={1}".format(K,encodeURIComponent(O))}else{F+=Q}}}else{if(!H){F+="?{0}={1}".format(K,encodeURIComponent(O))}}if(J){F+="#"+J}return F};vBulletin.getSelectedFilters=function(F,G){var H={};if(!G){var I=F.serializeArray();C.each(I,function(L,M){if(M.name!="securitytoken"){if(M.name.slice(-2)=="[]"){var K=M.name.split("[]");H[K[0]]=H[K[0]]||[];H[K[0]].push(M.value)}else{H[M.name]=M.value}}})}else{var J=F.parent().find(".filtered-by .filter-text").filter(":visible");F.find(":input:radio:checked").each(function(L,N){var M=C(N);if((M.hasClass("js-default-checked")||M.data("bypass-filter-display")==1)&&(J.length==0||J.filter('[data-filter-name={0}][data-filter-value="{1}"]').length==0)){return true}if(N.name.slice(-2)=="[]"){var K=N.name.split("[]");H[K[0]]=H[K[0]]||[];H[K[0]].push(N.value)}else{H[N.name]=N.value}})}return H};vBulletin.makeFilterUrlFromSelectedFilters=function(J,K,T,P,M){var R,I=location.pathname.replace(/\/$/,"").replace(/\/page[0-9]+/,""),H=C(".toolbar-filter-overlay",J),O=vBulletin.getSelectedFilters(H,true),Q=C(".pagenav-form .js-pagenum",J).val()||1,L=C(".toolbar-search-form .js-filter-search",J).val()||"",V=C(J).closest(".canvas-widget"),S=C(".conversation-toolbar-wrapper",J).length?(C(".conversation-toolbar-wrapper",J).data("allow-history")=="1"):(C(J).data("allow-history")=="1"),G=new vBulletin.history.instance(S),F=V.data("widget-default-tab")||V.find(".ui-tabs-nav > li:first-child a").attr("href");if(C.isEmptyObject(O)){C(".conversation-toolbar .js-button-filters",J).each(function(){var W=C(".js-button-filter.js-checked:not(.js-default-checked)",this);if(W.length){O[W.data("filter-name")]=W.data("filter-name")}})}if(!T){var U=new RegExp("\\/("+P.join("|")+")/?$"),N=I.match(U);if(N){I=I.replace(new RegExp(N[0]),"/"+K)}else{I+="/"+K}}if(Q>1&&G.isEnabled()){I+="/page"+Q}if(T&&K&&F!=("#"+K)){O.tab=K;if(!G.isEnabled()){I+="?tab="+K}}if(!G.isEnabled()){return I+(M?"#"+M:"")}if(L){O.q=L}R=C.param(O);return I+(R?"?"+R:"")+(M?"#"+M:"")};vBulletin.parseQueryString=function(I,G){var F={},J;if(I&&I.length>1){J=I.indexOf("?");G=(G instanceof Array)?G:[];if(J!=-1){var H=I.substring(J+1).split("&");C.each(H,function(K,M){var L=M.split("=");if(G.length==0||(C.inArray(L[0],G)==-1)){F[L[0]]=decodeURIComponent((L[1]||"")).replace(/\+/g," ")}})}}return F};vBulletin.pagination=function(L){var T={context:document,onPageChanged:null,tabParamAsQueryString:true,allowHistory:false};if(L&&typeof L=="object"){C.extend(T,L)}var H,I=C(".pagenav-controls .pagenav-form",T.context),S=Number(C(".defaultpage",I).val())||Number(C(".js-pagenum",I).val())||1,N=new vBulletin.history.instance(T.allowHistory);I.data("object-instance",this);if(N.isEnabled()){var O=vBulletin.parseQueryString(location.search,["_"]),J=location.pathname.match(/\/page([0-9]+)/),G=N.getState();if(J&&Number(J[1])>1&&C.isEmptyObject(O)&&(!G||C.isEmptyObject(G.data))){H=vBulletin.makePaginatedUrl(location.href,S);var P={from:"pagination",page:S,tab:T.tabParamAsQueryString?"#"+I.closest(".ui-tabs-panel").attr("id"):vBulletin.getSelectedTabHashOrPath(I.closest(".ui-tabs"),false)};N.setDefaultState(P,document.title,H)}N.setStateChange(function(b){var U=N.getState();if(U.data.from=="pagination"){N.log(U.data,U.title,U.url);if(location.search){var d=vBulletin.parseQueryString(location.search,["_"]);if(!C.isEmptyObject(d)||d.tab=="groups-tab"){delete d.tab;C(window).trigger("statechange.filter",["pagination",d]);return }}var Y,W,f,c,a;if(U.data.tab){Y=T.tabParamAsQueryString?C(U.data.tab):C('.ui-tabs .ui-tabs-panel[data-url-path="'+U.data.tab+'"]')}W=(Y&&Y.length&&Y)||T.context;f=C(".conversation-toolbar .filter-wrapper",W).data("object-instance");if(f){f.resetFilters(true)}if(U.data.tab){c=Y.closest(".ui-tabs");$tabAnchor=T.tabParamAsQueryString?c.find('.ui-tabs-nav > li > a[href*="{0}"]'.format(U.data.tab)):c.find('.ui-tabs-nav > li > a[data-url-path="'+U.data.tab+'"]');if(!$tabAnchor.parent().hasClass("ui-tabs-active")){var Z=$tabAnchor.parent().index();vBulletin.selectTabByIndex.call(c,Z);return }}var g=C(".pagenav-controls .pagenav-form",W);var X=g.data("object-instance");if(X&&typeof X.getOption=="function"&&typeof X.getOption("onPageChanged")=="function"){var V=U.data.page||S;X.getOption("onPageChanged").apply(g.get(0),[V,false,!location.search,location.search])}}},"pagination")}function F(){return parseInt((C(".pagetotal",this).html()||"").replace(/[^\d]+/g,""),10)||1}function M(V,Z){var Y=F.apply(this),U=C(".arrow[rel=next]",this),X=C(".arrow[rel=prev]",this);if(V<1){V=1}else{if(V>Y){V=Y}}C(".js-pagenum",this).val(V);if(V==Y){U.addClass("h-disabled").removeAttr("href")}else{U.removeClass("h-disabled").attr("href",vBulletin.makePaginatedUrl(location.href,V+1))}if(V==1){X.addClass("h-disabled").removeAttr("href")}else{X.removeClass("h-disabled").attr("href",vBulletin.makePaginatedUrl(location.href,V-1))}if(typeof T.onPageChanged=="function"){T.onPageChanged.apply(this,[V,Z])}if(Y>1&&N.isEnabled()&&!Z){var a=N.getState();if(!a||!a.data||!a.data.from||C.inArray(a.data.from,["filter_blogs","filter_groups"]==-1)){if(V==1){H=C(".arrow[rel=next]",this).attr("href")}else{H=C(".arrow[rel=prev]",this).attr("href")}if(H){H=vBulletin.makePaginatedUrl(H,V);var W={from:"pagination",page:V,tab:T.tabParamAsQueryString?"#"+C(this).closest(".ui-tabs-panel").attr("id"):vBulletin.getSelectedTabHashOrPath(C(this).closest(".ui-tabs"),false)};N.pushState(W,document.title,H)}}}}function R(U){var V=parseInt(U);if(V&&typeof V==="number"){C("input[name=result-id]",I).val(V)}}function K(U){C("a.see-all-btn",this).closest(".pagenav-controls")[U?"addClass":"removeClass"]("h-hide")}C(".arrow",I).off("click").on("click",function(W){var V=C(this),X=this.form||V.closest("form").get(0);if(!V.hasClass("h-disabled")){var U=parseInt(C(".js-pagenum",X).val())+((V.attr("rel")=="next")?1:-1);if(!N.isEnabled()&&T.allowHistory){if(!this.href||this.hash==this.href){this.href=vBulletin.makePaginatedUrl(location.href,U)}return true}M.apply(X,[U,false])}return false});function Q(){C(T.context).off("click",".js-pagenav .js-pagenav-button").on("click",".js-pagenav .js-pagenav-button",function(W){if(N.isEnabled()){var X=C(this),U=X.data("page"),V=C(".pagenav-form",T.context).get(0);M.apply(V,[U,false]);return false}return true}).off("mouseover",".js-pagenav .js-pagenav-button").on("mouseover",".js-pagenav .js-pagenav-button",function(V){var U=C(this);if(!U.prop("href")){U.prop("href",vBulletin.makePaginatedUrl(location.href,parseInt(U.data("page"),10)))}});C(".js-pagenav .js-pagenav-button",T.context).each(function(){this.href=vBulletin.makePaginatedUrl(location.href,parseInt(C(this).data("page")))})}Q();C(".js-pagenum",I).off("keypress").on("keypress",function(W){if(W.keyCode==13){W.preventDefault();var U=parseInt(C(this).val(),10);var V=F.apply(this.form);if(U>V){U=V}if(U<1){U=1}if(N.isEnabled()){M.apply(this.form,[U,false])}else{if(T.allowHistory){location.href=vBulletin.makePaginatedUrl(location.href,U)}else{M.apply(this.form,[U,false])}}}});C(".js-pagenum",I).off("click").on("click",function(U){C(this).select()});this.updatePageInfo=function(V,U){if(V&&typeof V=="object"){var W=V.totalpages||1,X=C(".pagenav-controls .pagenav-form",T.context);C(".pagetotal",X).text(W);if(typeof V.showseemore!="undefined"){if(V.showseemore){K.apply(X,[false])}else{K.apply(X,[true])}}V.perpage=vBulletin.conversation.POSTS_PER_PAGE;if(U&&C(".pagenav-container",T.context).length>0){C.post(pageData.baseurl+"/ajax/render/pagenav",{pagenav:V},function(Y){if(Y){C(".pagenav-container",T.context).replaceWith(Y.template);Q()}},"json")}M.apply(X.get(0),[V.pagenumber,U])}};this.updateResultId=function(U){R(U)};this.setOption=function(U,V){T[U]=V};this.getOption=function(U){return T[U]};this.updatePageNavigation=function(V,U,W){M.apply(V.get(0),[U,W])}};vBulletin.conversation=vBulletin.conversation||{};vBulletin.conversation.toggleCommentBox=function(){var F=C(this).closest(".js-comment-entry__parent").find(".js-comment-entry");F.slideToggle("fast",function(){var G=C(this).find(".js-comment-entry__textbox");if(G.is(":visible")){G.focus()}});F.find(".js-comment-entry__cancel").off("click").on("click",function(G){F.slideToggle();return false});return false};vBulletin.conversation.postComment=function(M,J){var H=this;var G=C(H).closest(".js-comment-entry").find(".js-comment-entry__textbox");var L=C.trim(G.val());console.log(L);if(!L||(G.hasClass("placeholder")&&L==G.attr("placeholder"))){openAlertDialog({title:vBulletin.phrase.get("post_comment"),message:vBulletin.phrase.get("please_enter_your_comment"),iconType:"warning",onAfterClose:function(){G.focus()}});return false}C("body").css("cursor","wait");C(H).blur();var F=C(H).closest(".js-comment-entry__parent"),K=C(H).closest(".js-comment-entry--blog").length==1?1:0,I=C(H).closest(".js-comment-entry--article").length==1?1:0;C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/post-comment",data:({text:L,parentid:F.attr("data-node-id"),postindex:F.find(".js-post__content .b-post__count").text().replace("#",""),view:F.parent().hasClass("stream-view")?"stream":"thread",redirecturl:G.hasClass(".reload-on-post")?1:0,isblogcomment:K,isarticlecomment:I,humanverify:{input:C(H).closest(".js-comment-entry").find('[name="humanverify[input]"]').val(),hash:C(H).closest(".js-comment-entry").find('[name="humanverify[hash]"]').val()},recaptcha_challenge_field:C(H).closest(".js-comment-entry").find('[name="recaptcha_challenge_field"]').val(),recaptcha_response_field:C(H).closest(".js-comment-entry").find('[name="recaptcha_response_field"]').val()}),type:"POST",dataType:"json",complete:function(O,N){console.log("post-comment complete.");C("body").css("cursor","auto");vBulletin.hv.reset()},success:function(N,P,Q){console.log("post-comment successful! result:"+JSON.stringify(N));if(N){if(!N.error){if(typeof J=="function"){J.apply(H,[N])}if(!K&&!I){C(H).closest(".js-comment-entry").slideToggle()}vBulletin.subscribe.updateSubscribeButton(N.topic_subscribed);var O=F.attr("data-node-id");if(pageData.threadmarking=="0"||pageData.userid=="0"){vBulletin.cookie.setBbarrayCookie("discussion_view",O,Math.round(new Date().getTime()/1000))}else{C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/node/markRead",data:{nodeid:O},type:"POST",dataType:"json",complete:function(){},success:function(R){if(R&&!R.error){console.log("Topic "+O+" is marked read successfully!")}else{console.log("Topic "+O+" is marked read failed: "+R.error)}},error:function(T,S,R){console.log("Topic "+O+" is marked read failed:"+R)}})}}else{openAlertDialog({title:vBulletin.phrase.get("conversation"),message:vBulletin.phrase.get("error_x",N.error),iconType:"warning"})}}else{openAlertDialog({title:vBulletin.phrase.get("conversation"),message:vBulletin.phrase.get("invalid_server_response_please_try_again"),iconType:"error"})}},error:function(P,O,N){console.log("post-comment failed! error:"+N);openAlertDialog({title:vBulletin.phrase.get("conversation"),message:vBulletin.phrase.get("error_posting_comment_code_x",P.status),iconType:"error"})}})};vBulletin.conversation.showIp=function(G){var I=C(this),H=C(this).data("post-ip"),F=C(this).data("post-host");openAlertDialog({title:vBulletin.phrase.get("ip_info"),message:vBulletin.phrase.get("ip_address_is")+": "+H+"<br />"+vBulletin.phrase.get("host_name_is")+': <span class="ip-host-name loading">...</span>',iconType:"none"});vBulletin.AJAX({call:"/ajax/api/node/getHostName",data:{ip:H},success:function(J,K,L){C(".ip-host-name").removeClass("loading").html(J)}});return false};vBulletin.conversation.showPostHistory=function(I){var J=C(this);var H=C(this).closest(".js-post").attr("data-node-id");var G=openConfirmDialog({title:vBulletin.phrase.get("post_history"),message:vBulletin.phrase.get("loading")+"...",width:800,dialogClass:"post-history-dialog dialog-container dialog-box loading",buttonLabel:{yesLabel:vBulletin.phrase.get("compare_versions"),noLabel:vBulletin.phrase.get("cancel")},onAfterClose:function(){if(this.id=="btnConfirmDialogYes"){var L=G.find(".post-history-form");var K={oldpost:L.find("input:radio[name=old]:checked").val()||1,newpost:L.find("input:radio[name=new]:checked").val()||1,nodeid:H};C("#btnConfirmDialogYes").hide();var M=openConfirmDialog({title:vBulletin.phrase.get("post_history"),message:vBulletin.phrase.get("loading")+"...",width:800,dialogClass:"post-history-comparison-dialog dialog-container dialog-box loading",buttonLabel:{yesLabel:vBulletin.phrase.get("compare_versions"),noLabel:vBulletin.phrase.get("close")},onAfterClose:function(){C("#btnConfirmDialogYes").show()}});F(M,"post_history_form",K)}}});F(G,"post_history_form",{nodeid:H});function F(K,L,M){C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/render/"+L,data:M,type:"POST",dataType:"json",success:function(N){console.log("/ajax/render/"+L);if(N&&!N.errors){K.removeClass("loading").find(".dialog-content .message").html(N).find("[placeholder]").placeholder().end().end().dialog("option","position",{of:window})}else{console.log("/ajax/render/"+L+" successful, but response was not valid: "+JSON.stringify(N));openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("invalid_server_response_please_try_again"),iconType:"error",onAfterClose:function(){K.dialog("close")}})}},error:function(P,O,N){console.log("/ajax/render/"+L+" failed, error: "+N);openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("error_loading_delete_form"),iconType:"error",onAfterClose:function(){K.dialog("close")}})}})}};vBulletin.conversation.flagPost=function(G){var H=C(this),F=C(this).closest(".js-post").attr("data-node-id");openPromptDialog({title:vBulletin.phrase.get("flag_a_post"),message:vBulletin.phrase.get("please_enter_your_reason_why_you_want_to_flag_this_post"),buttonLabel:{okLabel:vBulletin.phrase.get("send_report"),cancelLabel:vBulletin.phrase.get("cancel")},multiline:true,validation:{type:"string"},onClickOK:function(I){C("body").css("cursor","wait");C.ajax({url:vBulletin.getAjaxBaseurl()+"/report/report",type:"POST",data:{reason:I,reportnodeid:F},dataType:"json",success:function(J){if(J){if(J.error){console.log("/report/report failed, error: "+JSON.stringify(J.error));var K;if(J.error.length>1){K=vBulletin.phrase.get(J.error)}else{K=vBulletin.phrase.get(J.error[0])}openAlertDialog({title:vBulletin.phrase.get("flag_a_post"),message:K,iconType:"error"})}else{openAlertDialog({title:vBulletin.phrase.get("flag_a_post"),message:vBulletin.phrase.get("the_report_has_been_sent"),iconType:"",onAfterClose:function(){C("#prompt-dialog").dialog("close")}})}}},error:function(L,K,J){console.log("/report/report failed, error: "+J);openAlertDialog({title:vBulletin.phrase.get("flag_a_post"),message:vBulletin.phrase.get("unable_to_contact_server_please_try_again"),iconType:"error",onAfterClose:function(){C("#prompt-dialog").dialog("close")}})},complete:function(){C("body").css("cursor","default")}})}});return false};vBulletin.conversation.editPost=function(L,O){var Q=C(this),H,P,M=Q.closest(".conversation-list");if(Q.closest(".js-comments").length>0){H="comment"}var I=C(".edit-conversation-container form",M);if(I.length>0){openAlertDialog({title:vBulletin.phrase.get("edit_conversation"),message:vBulletin.phrase.get("you_have_a_pending_edit_unsaved"),iconType:"warning",onAfterClose:function(){vBulletin.animateScrollTop(I.closest(".js-post").offset().top,{duration:"slow"})}});return }if(O&&O.isFilterSelected("conversations_on")){O.toggleNewConversations(false)}window.vBulletin.loadingIndicator.show();L.preventDefault();var G=Q.parent().attr("data-node-id"),F=(H=="comment")?Q.closest(".js-comment"):Q.closest(".js-post__content-wrapper");if(M.hasClass("thread-view")){P="thread"}else{if(M.hasClass("full-activity-view")){P="full-activity-stream"}else{if(M.hasClass("activity-view")){P="activity-stream"}else{P="stream"}}}H=H||F.attr("data-node-type")||"";var K,N=C(".b-post__count",F).text()||"1";if(H=="comment"&&(P=="thread"||M.closest(".blog-conversation-content-widget").length==1)){K=Number(N.replace("#",""))}else{K=Number(N.replace("#",""))-1}var J=function(S,V,X,R){if(S&&S.error){window.vBulletin.loadingIndicator.hide();R.find(".js-button-group .js-button").prop("disabled",false);if(C.isArray(S.error)){switch(S.error[0]){case"toomanyimages":var W=vBulletin.phrase.get("toomanyimages",S.error[1],S.error[2]);break;default:C.each(S.error,function(Z,a){S.error[Z]=vBulletin.phrase.get(a)});var W=S.error.join("<br />")}}else{var W=vBulletin.phrase.get(S.error)}openAlertDialog({title:vBulletin.phrase.get("edit_conversation"),message:W,iconType:"error"});return }var Y=C(".edit-conversation-container form",F).data("content-type");var T=vBulletin.triggerHandler.apply(R.get(0),["afterSave",C(document),S]);if(T===false){C("body").trigger(Y+"_editform_onunload",[F]);window.vBulletin.loadingIndicator.hide();return }R.closest(".conversation-reply-slideout").addClass("h-hide");var U=pageData;U["posts-perpage"]=vBulletin.conversation.POSTS_PER_PAGE;if(P=="thread"){U["comments-perpage"]=vBulletin.conversation.COMMENTS_PER_PAGE}var X=C.post(vBulletin.getAjaxBaseurl()+"/create-content/loadnode",{nodeid:G,view:P,index:K,page:U,type:H,isAjaxTemplateRender:true},function(d){if(d.error){openAlertDialog({title:vBulletin.phrase.get("conversation"),message:vBulletin.phrase.get(d.error),iconType:"error"})}else{var Z=R.closest(".js-content-entry").data("current-channelid"),b=R.find('input[name="parentid"]:checked').val(),a=C(d);if(Z>0&&b>0&&(Z!=b)){window.location.reload(true);return }C("body").trigger(Y+"_editform_onunload",[F]);if(O&&O.isFilterSelected("conversations_on")){O.toggleNewConversations(true)}Q.closest(".js-post").replaceWith(a);C("body").trigger(Y+"_newcontent_onload",[a]);var e=a.attr("data-node-id");if(a.hasClass("js-conversation-starter")){var c=C(".js-post-title",a).first().text();document.title=c+" - "+vBulletin.options.get("bbtitle");C(".page-title-widget .js-main-title").text(c)}C(".js-select-box",a).selectBox();vBulletin.animateScrollTop(a.offset().top,{duration:"slow"})}},"json").error(function(){openAlertDialog({title:vBulletin.phrase.get("conversation"),message:vBulletin.phrase.get("error_loading_post"),iconType:"error"})}).complete(function(){window.vBulletin.loadingIndicator.hide()})};C.post(vBulletin.getAjaxBaseurl()+"/create-content/loadeditor",{nodeid:G,type:H,view:P,isAjaxTemplateRender:true},function(R){if(R.error){openAlertDialog({title:vBulletin.phrase.get("edit_conversation"),message:vBulletin.phrase.get(R.error),iconType:"error"})}else{var S=function(){if(typeof vBulletin.upload=="undefined"||typeof vBulletin.tagEditor=="undefined"||typeof vBulletin.contentEntryBox.init=="undefined"){vBulletin.ckeditor.loadScripts("",{},S);return }F.addClass("b-post--edit");F.find(".js-post__content").first().addClass("b-post__content--edit");F.find(".b-post__footer").first().addClass("b-post__footer--edit");$container=F.find(".edit-conversation-container").first();F.closest(".js-album-detail").find(".list-item-header").addClass("h-hide").end().find(".conversation-body").addClass("h-hide").end().find(".profile-media-uploadphotos").addClass("h-hide-imp").end().find(".photo-preview").addClass("h-hide").end();vBulletin.contentEntryBox.init();vBulletin.contentEntryBox.setDefaultTab($container.find(".js-content-entry").first());$container.show();console.log($container);window.vBulletin.loadingIndicator.hide();var V=$container.find(".js-attach-list");vBulletin.upload.initializePhotoUpload(F);var U=C(".js-post[data-node-id={0}] .tag-editor-container .tag-input".format(G));if(U.length>0&&typeof vBulletin.tagEditor!="undefined"){var W=new vBulletin.tagEditor.instance(U.selector)}if(V.data("attach-count")>0){$container.find(".b-toolbar__item").filter(function(){return C(this).data("panel")=="b-content-entry-panel__content--attachment"}).click()}vBulletin.contentEntryBox.afterPanelChange(F);C(".js-datepicker",$container).not(".hasDatePicker").datetimepicker({showOn:"both",buttonImage:pageData.baseurl+"/images/calendar-blue.png",buttonImageOnly:true,ampm:true})};console.log("Edit mode: Adding Content Entry UI to DOM (contains parsed post text in the .js-editor-parsed-text element)");C(".edit-conversation-container",F).first().hide().html(R);var T=C(".edit-conversation-container form",F).data("content-type");C(window).off("beforeunload.editPost").on("beforeunload.editPost",function(){return vBulletin.phrase.get("onbeforeunload_message_while_editing_post")});C("body").trigger(T+"_editform_onload",[F,S]);C(".edit-conversation-container input[placeholder], .edit-conversation-container textarea[placeholder]",F).placeholder();C("form",F).ajaxForm({dataType:"json",success:J,beforeSerialize:function(U){console.log("ajaxForm beforeSerialize (vBulletin.conversation.editPost)");U.trigger("beforeSave");var V=C("body").triggerHandler(T+"_editform_onbeforeserialize",[U]);return(V===false)?false:true},beforeSubmit:function(X,W,V){var U=vBulletin.contentEntryBox.validateForm.apply(W,[V]);if(U===false){return false}C(window).off("beforeunload.editPost");window.vBulletin.loadingIndicator.show();return true},complete:function(){console.log("ajaxForm complete (vBulletin.conversation.editPost)")}})}},"json").error(function(S,T,R){openAlertDialog({title:vBulletin.phrase.get("edit_conversation"),message:"HTTP {0} - {1}".format(S.status,R),iconType:"error"})}).complete(function(S,T,R){window.vBulletin.loadingIndicator.hide()})};vBulletin.conversation.votePost=function(G){var F=C(this).closest(".js-post").attr("data-node-id");C(".js-post[data-node-id="+F+"] .js-post-control__vote").addClass("h-disabled");C("body").css("cursor","wait");if(!C(this).hasClass("voted")){C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/reputation/vote",type:"POST",data:{nodeid:F},dataType:"json",success:function(H){if(H){if(H.errors){openAlertDialog({title:vBulletin.phrase.get("error_saving_vote"),message:vBulletin.phrase.get(H.errors[0]),iconType:"error"});C(".list-item[data-node-id="+F+"] .js-post-control__vote").removeClass("h-disabled")}else{C(".js-post[data-node-id="+H.nodeid+"] .votecount").html(H.votes);C(".js-post[data-node-id="+F+"] .js-post-control__vote").addClass("voted").removeClass("h-disabled").find(".b-post-control__label").text(vBulletin.phrase.get("unvote_cap")).end()}}},complete:function(){C("body").css("cursor","default")}})}else{C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/reputation/unvote",type:"POST",data:{nodeid:F},dataType:"json",success:function(H){if(H){if(H.errors){openAlertDialog({title:vBulletin.phrase.get("error_saving_vote"),message:vBulletin.phrase.get(H.errors[0]),iconType:"error"});C(".js-post[data-node-id="+F+"] .js-post-control__vote").removeClass("h-disabled")}else{C(".js-post[data-node-id="+H.nodeid+"] .votecount").html(H.votes);C(".js-post[data-node-id="+F+"] .js-post-control__vote").removeClass("voted").removeClass("h-disabled").find(".b-post-control__label").text(vBulletin.phrase.get("vote_cap")).end()}}},complete:function(){C("body").css("cursor","default")}})}};vBulletin.conversation.showWhoVoted=function(H){var F=C(this);if(C(this).hasClass("novotepopup")){return }var G=F.closest(".js-post").attr("data-node-id");F.qtip({content:{title:{text:vBulletin.phrase.get("people_who_liked"),button:true},text:vBulletin.phrase.get("loading")+"...",ajax:{url:vBulletin.getAjaxBaseurl()+"/ajax/api/reputation/fetchWhovoted",type:"POST",data:{nodeid:G},dataType:"json",once:false,success:function(L,J){if(L.errors){this.set("content.text",L.errors[0][0])}else{if(L.length<1){this.set("content.text",vBulletin.phrase.get("no_one_voted"))}else{var N="<ul>";for(x in L){var I=pageData.baseurl+L[x].profileurl,Q;if(!L[x].avatarurl){Q=pageData.baseurl_core+"/image.php?u="+L[x].userid+"&type=profile"}else{Q=pageData.baseurl_core+"/"+L[x].avatarurl}var M=C("<img>").attr("src",Q).attr("alt",L[x].username),P=C("<a>").attr("href",I).addClass("avatar"),K=C("<a>").attr("href",I).addClass("username").html(L[x].musername),R=C("<li>"),O=C("<div>").addClass("usertitle").html(L[x].usertitle);P.append(M);R.append(P);R.append(K);R.append(O);N+=C("<div>").append(R).html()}N+="</ul>";this.set("content.text",N)}}},error:function(I,K,J){this.set("content.text","failed to load.")}}},position:{my:"left top",at:"right top",viewport:C(window)},show:{event:"click"},hide:{event:"unfocus",fixed:true},style:{classes:"ui-tooltip-shadow ui-tooltip-light ui-tooltip-whovoted"}});F.qtip("api").show()};vBulletin.conversation.processPostContent=function(F){F.css("border-bottom","").filter(".stream-view.activity-view").find(".list-item-poll form.poll").each(function(G,H){if(C(this).is(":visible")&&C(".view-less-ctrl",this).hasClass("h-hide")){vBulletin.conversation.limitVisiblePollOptionsInAPost(this,3)}})};vBulletin.conversation.limitVisiblePollOptionsInAPost=function(J,I){if(typeof I=="undefined"){I=3}var G=0,H=C("ul.poll li",J),F=parseInt(H.css("line-height"),10);H.each(function(K){C(this).removeClass("h-hide");var L=C(this).height();G+=L/F;if(G>I){C(this).addClass("h-hide")}else{C(this).css("display","")}});if(G>3){C(".view-more-ctrl",J).removeClass("h-hide").next(".js-button-group").addClass("h-hide").next(".view-less-ctrl").addClass("h-hide")}else{C(".view-more-ctrl",J).addClass("h-hide").next(".js-button-group").removeClass("h-hide").next(".view-less-ctrl").addClass("h-hide")}};vBulletin.conversation.bindEditFormEventHandlers=function(M){M=(M)?M.toLowerCase():"";if(C.inArray(M,["text","gallery","video","poll","link","comment"])!=-1||M=="all"){var H=function(R,Q){if(typeof Q=="function"){console.log("Edit mode: initializeEditor");var P=R.find(".js-editor");if(P.length>0){vBulletin.ckeditor.initEditor(P,{success:function(S){if(typeof Q=="function"){Q();vBulletin.contentEntryBox.afterPanelChange(R);vBulletin.ckeditor.initEditorComponents(R);var T=this;window.setTimeout(function(){console.log("Edit mode: Adding post data to CKEditor (vBulletin.conversation.bindEditFormEventHandlers)");T.setData(P.prev(".js-editor-parsed-text").html(),function(){var U=vBulletin.ckeditor.getEditor(S);vBulletin.ckeditor.fixTableFunctionality.call(vBulletin.ckeditor,{},U);U.focus()})},0)}},error:function(T){if(typeof Q=="function"){Q()}P.prop("disabled",false).removeClass("ckeditor-load-on-focus").closest(".js-content-entry").addClass("b-content-entry--no-ckeditor");var S=P.prev(".js-editor-parsed-text").html();if(S!=""){vBulletin.AJAX({url:vBulletin.getAjaxBaseurl()+"/ajax/api/editor/convertHtmlToBbcode",data:{nodeid:pageData.nodeid,data:S,allowsmilie:1,securitytoken:pageData.securitytoken},success:function(U){if(U&&U.data){P.html(U.data)}else{openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("invalid_server_response_please_try_again"),iconType:"error"})}},error_phrase:"error_converting_message"})}},hideLoadingDialog:false})}else{if(typeof Q=="function"){Q();P.focus()}}}};var N=function(R){var Q=R.find(".js-editor");if(Q.length>0){var P=Q.attr("id");if(vBulletin.ckeditor.editorExists(P)){vBulletin.ckeditor.destroyEditor(P)}}Q.closest("form").remove()};var G=function(){C("body").off("comment_editform_onload").on("comment_editform_onload",function(Q,R,P){if(typeof P=="function"){P();C(".js-editor",R).focus().filter(".autogrow").elastic().off("blur.elastic")}}).off("comment_editform_onunload").on("comment_editform_onunload",function(P,Q){})};var J=function(){C("body").off("text_editform_onload").on("text_editform_onload",function(Q,R,P){H(R,P)}).off("text_editform_onunload").on("text_editform_onunload",function(P,Q){N(Q)}).off("text_newcontent_onload").on("text_newcontent_onload",function(P,Q){if(Q.closest(".conversation-list.stream-view.activity-view").length>0){vBulletin.truncatePostContent(Q)}})};var K=function(){C("body").off("poll_editform_onload").on("poll_editform_onload",function(Q,R,P){H(R,P)}).off("poll_editform_onunload").on("poll_editform_onunload",function(P,Q){N(Q)}).off("poll_newcontent_onload").on("poll_newcontent_onload",function(P,Q){if(Q.closest(".conversation-list.stream-view.activity-view").length>0){vBulletin.truncatePostContent(Q);vBulletin.conversation.limitVisiblePollOptionsInAPost(C("form.poll",Q),3)}})};var I=function(){C("body").off("gallery_editform_onload").on("gallery_editform_onload",function(Q,R,P){C('.b-toolbar__item[data-panel="b-content-entry-panel__content--gallery"]',R).trigger("click");H(R,function(){if(typeof P=="function"){P()}vBulletin.upload.initializePhotoUpload(R)})}).off("gallery_editform_onunload").on("gallery_editform_onunload",function(P,Q){N(Q)}).off("gallery_editform_onbeforeserialize").on("gallery_editform_onbeforeserialize",function(Q,P){P.find(".caption-box").each(function(){var R=C(this);if(R.hasClass("placeholder")&&R.val()==R.attr("placeholder")){R.val("")}});return true}).off("gallery_newcontent_onload").on("gallery_newcontent_onload",function(P,Q){if(Q.closest(".conversation-list.stream-view.activity-view").length>0){vBulletin.truncatePostContent(Q)}})};var L=function(){C("body").off("video_editform_onload").on("video_editform_onload",function(Q,R,P){C('.b-toolbar__item[data-panel="b-content-entry-panel__content--video"]',R).trigger("click");H(R,function(){if(typeof P=="function"){P()}O(C(".b-content-entry-panel__content--video",R),"video")});C(".js-attach-button",R).on("click",function(V){V.preventDefault();var S=C(this),W=S.closest(".b-content-entry-panel__content--video"),U=C(".b-link-input__url",W),T=C.trim(U.val());if(!T){openAlertDialog({title:vBulletin.phrase.get("attach_video"),message:vBulletin.phrase.get("please_enter_video_url"),iconType:"warning",onAfterClose:function(){U.focus()}});return false}S.prop("disabled",true);C(".js-contententry-buttons .b-button",W).prop("disabled",true);C("body").css("cursor","wait");C.post(vBulletin.getAjaxBaseurl()+"/link/getlinkdata",{url:T,isAjaxTemplateRender:true},function(Y){if(Y.error){openAlertDialog({title:vBulletin.phrase.get("attach_video"),message:vBulletin.phrase.get(Y.error),iconType:"warning",onAfterClose:function(){U.focus()}})}else{$template=C(Y);W.find(".js-panel-content").append($template);O(W,"video");$template.fadeIn("slow",function(){U.val("");C(".b-link-input",W).addClass("h-hide")});var X=R.closest("form");if($template.find("js-video-url")){X.data("content-type","video")}else{X.data("content-type","link")}}},"json").error(function(Z,Y,X){openAlertDialog({title:vBulletin.phrase.get("attach_video"),message:"HTTP {0} - {1}".format(Z.status,X),iconType:"error"})}).complete(function(){C("body").css("cursor","default");S.prop("disabled",false);C(".js-contententry-buttons .b-button",W).prop("disabled",false)})})}).off("video_editform_onunload").on("video_editform_onunload",function(P,Q){N(Q)}).off("video_newcontent_onload").on("video_newcontent_onload",function(P,Q){if(Q.closest(".conversation-list.stream-view.activity-view").length>0){vBulletin.truncatePostContent(Q)}})};var F=function(){C("body").off("link_editform_onload").on("link_editform_onload",function(Q,R,P){C('.b-toolbar__item[data-panel="b-content-entry-panel__content--link"]',R).trigger("click");H(R,function(){if(typeof P=="function"){P()}O(C(".b-content-entry-panel__content--link",R),"link")});C(".js-attach-button",R).on("click",function(V){V.preventDefault();var S=C(this),W=S.closest(".b-content-entry-panel__content--link"),U=C(".b-link-input__url",W),T=C.trim(U.val());if(!T){openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("please_enter_a_valid_url_and_click_attach"),iconType:"warning",onAfterClose:function(){U.focus()}});return false}if(!T.match(/^https?:\/\//)){T="http://"+T;U.val(T)}S.prop("disabled",true);C(".js-contententry-buttons .b-button",W).prop("disabled",true);C("body").css("cursor","wait");C.post(vBulletin.getAjaxBaseurl()+"/link/getlinkdata",{url:T,isAjaxTemplateRender:true},function(Z){if(Z.error){openAlertDialog({title:vBulletin.phrase.get("attach_link"),message:vBulletin.phrase.get(Z.error),iconType:"warning",onAfterClose:function(){U.focus()}})}else{var Y=C(Z);Y.find("img").error(function(){C(this).closest("li").remove()});W.find(".js-panel-content").append(Y);O(W,"link");Y.fadeIn("slow",function(){U.val("");C(".b-link-input",W).addClass("h-hide")});var X=R.closest("form");if(Y.find("js-video-url")){X.data("content-type","video")}else{X.data("content-type","link")}}},"json").error(function(Z,Y,X){openAlertDialog({title:vBulletin.phrase.get("attach_link"),message:"HTTP {0} - {1}".format(Z.status,X),iconType:"error"})}).complete(function(){C("body").css("cursor","default");S.prop("disabled",false);C(".js-contententry-buttons .b-button",W).prop("disabled",false)})})}).off("link_editform_onunload").on("link_editform_onunload",function(P,Q){N(Q)}).off("link_newcontent_onload").on("link_newcontent_onload",function(P,Q){if(Q.closest(".conversation-list.stream-view.activity-view").length>0){vBulletin.truncatePostContent(Q)}}).off("link_savepost_success").on("link_savepost_success",function(P,Q){C(".b-link-input",Q).removeClass("h-hide-imp")})};var O=function(Q,R){C(".b-link-content__urlinfo .js-link-edit",Q).on("click",function(T){T.preventDefault();var S=C(this).parent().parent();S.addClass("b-link-content__urlinfo-meta--edit-mode");C(".js-link-textbox",S).val(C.trim(C(".b-link-content__urlinfo-text",S).text())).trigger("focus");C(".js-link-save",S).on("click",function(U){U.preventDefault();C(".b-link-content__urlinfo-text",S).text(C(".js-link-textbox",S).val());S.removeClass("b-link-content__urlinfo-meta--edit-mode")})});C(".js-link-remove",Q).on("click",function(S){S.preventDefault();C(this).closest(".b-content-entry-panel__content").find(".b-link-input").removeClass("h-hide");C(this).closest(".js-panel-content").empty();C(".b-link-input",Q).removeClass("h-hide")});if(R=="link"){C(".js-link-preview-checkbox",Q).off("click").on("click",function(){C(".b-link-content__thumbnail",Q)[this.checked?"addClass":"removeClass"]("h-hide")});var P=C(".b-link-thumbnail-list__item",Q).length;C(".b-link-thumbnail-list",Q).jcarousel({scroll:1,wrap:null,size:P,rtl:C("html").attr("dir")=="rtl",buttonNextCallback:function(U,T,S){if(S){C(".b-thumbnail-nav .b-thumbnail-nav__next-arrow",Q).removeClass("b-icon__arrow-right-m--disabled").addClass("b-icon__arrow-right-m--default")}else{C(".b-thumbnail-nav .b-thumbnail-nav__next-arrow",Q).addClass("b-icon__arrow-right-m--disabled").removeClass("b-icon__arrow-right-m--default")}},buttonPrevCallback:function(U,T,S){if(S){C(".b-thumbnail-nav .b-thumbnail-nav__prev-arrow",Q).removeClass("b-icon__arrow-left-m--disabled").addClass("b-icon__arrow-left-m--default")}else{C(".b-thumbnail-nav .b-thumbnail-nav__prev-arrow",Q).addClass("b-icon__arrow-left-m--disabled").removeClass("b-icon__arrow-left-m--default")}},initCallback:function(T,S){if(S=="init"&&P>0){C(".b-thumbnail-nav .b-thumbnail-nav__counter",Q).html("1/"+P);C(".b-thumbnail-nav .b-thumbnail-nav__prev-arrow",Q).off("click").on("click",function(){if(!C(this).hasClass("b-icon__arrow-left-m--disabled")){C(".jcarousel-container .jcarousel-prev",Q).trigger("click")}});C(".b-thumbnail-nav .b-thumbnail-nav__next-arrow",Q).off("click").on("click",function(){if(!C(this).hasClass("b-icon__arrow-right-m--disabled")){C(".jcarousel-container .jcarousel-next",Q).trigger("click")}})}},itemVisibleInCallback:function(V,T,S,U){if(U=="init"){return false}C(".b-thumbnail-nav .b-thumbnail-nav__counter",Q).html(S+"/"+P);C('input[type="radio"]',T).prop("checked",true)},itemFallbackDimension:90})}};switch(M){case"text":J();break;case"comment":G();break;case"poll":K();break;case"gallery":I();break;case"video":L();break;case"link":F();break;case"all":J();G();K();I();L();F();break}}};vBulletin.isScrolledIntoView=function(H,M){var N=false;if(C.isPlainObject(M)&&(M).toString()=="[object Object]"){N=true;M.top=0;M.bottom=0}H=(H instanceof C)?H:C(H);if(H.length==0){return false}var F=C(window).scrollTop(),G=F+C(window).height(),K=H.offset().top,I=K+H.outerHeight(),L=K-F,J=G-I;if(N){M.top=L;M.bottom=J}return(L>=0&&J>=0)};vBulletin.scrollToFixed=function(J){var F=this,G={element:C(),fixedAt:"top",limit:0,triggerOnload:true,zIndex:99},H=("scrollToFixed"+Math.random()).replace(".","");function I(P){G=C.extend({},G,P);if(G.element){G.element=(G.element instanceof C)?G.element:C(G.element);if(G.element.length>0){if(C.inArray(G.fixedAt,["top","bottom"])){G.fixedAt="top"}var M=G.element,K="scrolltofixed",L={width:M.width(),offset:M.offset(),"margin-top":parseInt(M.css("margin-top"),10),"margin-bottom":parseInt(M.css("margin-bottom"),10),cssPosition:M.css("position"),coordinates:{left:M.css("left"),top:M.css("top"),right:M.css("right"),bottom:M.css("bottom")}};var O=C("<div />").addClass("scrolltofixed-filler").hide().insertAfter(M);M.data("origOffsetTop",L.offset.top);M.css("z-index",G.zIndex);M.data("object-instance",F);var N=C(window).off("scroll."+H).on("scroll."+H,function(){if(M.is(":hidden")){return }var T=C(this).scrollTop();if(G.limit>0&&T>G.limit&&M.hasClass(K)){M.removeClass(K).css({position:"absolute",left:"auto",right:"auto",top:"auto",bottom:"auto",width:L.width})}else{if((G.limit>0&&T<G.limit&&T>L.offset.top&&!M.hasClass(K))||(G.limit<=0&&T>L.offset.top&&!M.hasClass(K))){O.css({display:M.css("display"),width:M.outerWidth(true),height:M.outerHeight(true),"float":M.css("float")});var Q=(vBulletin.Responsive&&vBulletin.Responsive.scrollToFixedBreakPoint)?vBulletin.Responsive.scrollToFixedBreakPoint:0;if(C("#vb-page-body").width()>Q){M.addClass(K).width(L.width).css({left:L.offset.left,right:"auto",width:L.width,top:(G.fixedAt=="top")?0:"auto",bottom:(G.fixedAt=="bottom")?0:"auto",position:""})}else{O.hide()}var S=L["margin-"+G.fixedAt];if(S){var R={};R[G.fixedAt]=-S+"px";M.animate(R,"fast")}}else{if(T<=L.offset.top&&M.hasClass(K)){O.hide();M.removeClass(K).css({position:"",width:"",left:"",top:"",right:"",bottom:""})}}}}).off("resize."+H).on("resize."+H,function(){M.removeClass(K).width("auto").css({position:"",left:""});L.width=M.width();L.offset=M.offset();C(this).trigger("scroll."+H)});if(G.triggerOnload){N.trigger("scroll."+H)}}}}this.updateLimit=function(K){if(!isNaN(Number(K))){G.limit=K;C(window).trigger("scroll."+H)}};this.addLimit=function(K){if(!isNaN(Number(K))){G.limit+=K;C(window).trigger("scroll."+H)}};this.reset=function(K){I(K)};I(J)};vBulletin.scrollToAnchor=function(J){J=J.replace(/(:|\.|\[|\]|,|\/)/g,"\\$1");var H=C(J);console.log("vBulletin.scrollToAnchor() hash: {0}, found: {1}".format(J,H.length));if(H.length>0){var G=H.show().offset().top-2;H.hide();var I=C("html,body"),F=C(".scrolltofixed-floating.scrolltofixed-top"),K=false;if(F.length>0){if(C(".list-container .list-item:first a.anchor"+J).length==1){if(F.hasClass("scrolltofixed")){F.removeClass("scrolltofixed")}G=F.offset().top;K=true}else{if(F.hasClass("scrolltofixed")){G-=F.outerHeight()}}}I.animate({scrollTop:G},1000,function(){if(!K){var M=H.show().offset().top;H.hide();var L=C(".scrolltofixed-floating.scrolltofixed-top.scrolltofixed");M-=(L.length>0)?L.outerHeight():0;I.animate({scrollTop:M},"slow")}C("a.anchor").show()});return false}C("a.anchor").show();return true};if(location.hash){vBulletin.scrollToAnchor(location.hash)}vBulletin.animateScrollTop=function(G,H){console.log("vBulletin.animateScrollTop({0})".format(G));var F=C(".scrolltofixed-floating.scrolltofixed-top");if(F.length>0){var I=F.data("origOffsetTop")||F.offset().top;if(!F.hasClass("scrolltofixed")&&I<G){G-=F.outerHeight(true)}if(I<G){G-=F.outerHeight()}}C("html, body").animate({scrollTop:G},H)};vBulletin.truncatePostContent=function(F){F=(F instanceof C)?F:C(F);if(F.selector==""){F=C("body")}C(".poll-desc.ellipsis, .message-body.ellipsis",F).each(function(){var G=C(this);truncatedHeight=G.height();G.removeClass("ellipsis");var H=G.height();G.addClass("ellipsis");if(H>truncatedHeight){G.closest(".list-item-body").find(".post-links").removeClass("hide-see-link").find(".see-link").off("click").on("click",function(){var J=C(this);if(J.hasClass("more")){G.removeClass("ellipsis")}else{G.addClass("ellipsis")}J.toggleClass("more less");var I=J.text();J.text(J.data("toggle-text")).data("toggle-text",I);return false})}});C(".list-item .see-link.more").each(function(G){var H=C(this).closest(".list-item"),J=C(H).find(".post-content.restore");if(J.length>0){var M=false,K=false,O=C(this).text(),I="",N=C(J).html(),L=this;C(this).on("click",function(){nodeid=C(H).attr("data-node-id");if(M){C(L).text(O);C(J).html(N);M=false}else{if(K){C(L).text(vBulletin.phrase.get("see_less"));M=true;C(J).html(I)}else{if(!K&&nodeid){C.ajax({url:vBulletin.getAjaxBaseurl()+"/activity/fetchText",type:"POST",data:{nodeid:nodeid},dataType:"json",complete:function(){},success:function(P){if(P&&!P.error&&P.nodeText){I=P.nodeText;if(I.length<=N.length){C(L).addClass("ui-helper-hidden");postLink=C(L).closest(".post-links").html().replace("<span>|</span>","");C(L).closest(".post-links").html(postLink)}else{C(J).html(P.nodeText);C(L).text(vBulletin.phrase.get("see_less"));console.log("loaded content for node "+nodeid);M=true;K=true;return false}}},error:function(R,Q,P){console.log("Attempt to load text for node "+nodeid+" failed:"+P)}})}}}return false})}})};vBulletin.markreadcheck=function(){if((parseInt(pageData.threadmarking)>0)&&(parseInt(pageData.userid)>0)){return }var F=C.cookie(pageData.cookie_prefix+"lastvisit");if(parseInt(pageData.userid)>0&&(!F||pageData.lastvisit>F)){F=pageData.lastvisit}var G=Math.round(new Date().getTime()/1000),H=G-vBulletin.options.get("markinglimit")*86400;C(".forum-item").each(function(){var J=parseInt(C(this).attr("data-lastcontent")),I=0;if(J<=F){C(this).removeClass("new");return }I=vBulletin.cookie.fetchBbarrayCookie("channel_view",C(this).attr("data-channel-id"));I=I?parseInt(I):0;C(this).toggleClass("new",(J>I))});C(".subforum-item").each(function(){var J=parseInt(C(this).attr("data-lastcontent")),I=0;if(J<=F){C(this).removeClass("new").find(".icon").removeClass("new");return }I=vBulletin.cookie.fetchBbarrayCookie("channel_view",C(this).attr("data-channel-id"));I=I?parseInt(I):0;C(this).toggleClass("new",(J>I)).find(".icon").toggleClass("new",(J>I))});C(".topic-item").each(function(){var J=parseInt(C(this).attr("data-lastcontent")),K=0,I=0,M=0;if(pageData.userid=="0"){if(J<=F){C(this).addClass("read");return }I=vBulletin.cookie.fetchBbarrayCookie("channel_view",C(this).attr("data-channel-id"));I=I?parseInt(I):0;K=vBulletin.cookie.fetchBbarrayCookie("discussion_view",C(this).attr("data-node-id"));K=K?parseInt(K):0;M=Math.max(I,K)}else{M=C(this).attr("data-readtime")?parseInt(C(this).attr("data-readtime")):0;I=C(this).attr("data-channelreadtime")?parseInt(C(this).attr("data-channelreadtime")):0;M=Math.max(M,I,H)}if(J<=M||C(this).hasClass("redirect")){C(this).addClass("read")}else{if(C(this).find(".topic-wrapper .go-to-first-unread").length==0){var L=C(this).find(".topic-wrapper .topic-title").attr("href");if(typeof (L)!="undefined"){L+=(L.indexOf("?")==-1?"?":"&amp;")+"goto=newpost";C("<a />").addClass("go-to-first-unread").attr("href",L).attr("title",vBulletin.phrase.get("go_to_first_new_post")).html("&nbsp;").prependTo(C(this).find(".topic-wrapper"));C(this).find(".vb-icon-topic-status").attr("title",vBulletin.phrase.get("new_posts"))}}}})};vBulletin.markchannelsread=function(H,I,F){channelids=[];if(parseInt(H)){vBulletin.setChannelRead(H,I)}else{if(pageData.channelid&&parseInt(pageData.channelid)&&parseInt(pageData.threadmarking)>0&&parseInt(pageData.userid)>0){vBulletin.setChannelRead(pageData.channelid,I)}else{channels=C(F).closest(".widget-content").find(".forum-list-container .forum-item");subchannels=C(F).closest(".widget-content").find(".forum-list-container .subforum-item");result=false;var G=function(J,L){var K=parseInt(C(L).attr("data-channel-id"),10);if(K){channelids.push(K)}};C.each(channels,G);C.each(subchannels,G)}}C.each(channelids,function(J,K){if(J>=channelids.length-1){vBulletin.setChannelRead(K,I)}else{vBulletin.setChannelRead(K,[])}})};vBulletin.setChannelRead=function(G,H){var I=Math.round(new Date().getTime()/1000);if(pageData.threadmarking=="0"||!parseInt(pageData.userid)){if(G==0){C.cookie(pageData.cookie_prefix+"lastvisit",I)}else{var F;try{F=C.parseJSON(vBulletin.cookie.convertBbarrayCookie(C.cookie(pageData.cookie_prefix+"channel_view")))||{}}catch(J){F={}}F[G]=I;var K={path:pageData.cookie_path,domain:pageData.cookie_domain};K.expires=365;C.cookie(pageData.cookie_prefix+"channel_view",vBulletin.cookie.convertBbarrayCookie(JSON.stringify(F),"set"),K)}if(H.success&&typeof H.success=="function"){H.success()}}else{C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/node/markChannelsRead",data:{nodeid:G},type:"POST",dataType:"json",complete:function(){},success:function(L){if(L&&!L.error){console.log("Channel "+G+" is marked read successfully!")}if(H.success&&typeof H.success=="function"){H.success(L)}else{console.log("Channel "+G+" is marked read failed: "+L.error)}},error:function(N,M,L){console.log("Channel "+G+" is marked read failed:"+error);openAlertDialog({title:vBulletin.phrase.get("forum"),message:"HTTP {0} - {1}".format(N.status,L),iconType:"error"})}})}return true};vBulletin.ckeditor=vBulletin.ckeditor||{};window.CKEDITOR_BASEPATH=pageData.baseurl+"/js/ckeditor/";vBulletin.ckeditor.requiredScriptsLoaded=false;vBulletin.ckeditor.requiredScriptsLoadFailed=false;vBulletin.ckeditor.requiredScriptLoadingStarted=false;vBulletin.ckeditor.checkEnvironment=function(){var I=navigator.userAgent.toLowerCase(),J=I.match(/edge[ \/](\d+.?\d*)/),G=I.indexOf("trident/")>-1,L=!!(J||G);var H={ie:L,edge:!!J,webkit:!L&&(I.indexOf(" applewebkit/")>-1),air:(I.indexOf(" adobeair/")>-1),mac:(I.indexOf("macintosh")>-1),quirks:(document.compatMode=="BackCompat"&&(!document.documentMode||document.documentMode<10)),mobile:(I.indexOf("mobile")>-1),iOS:/(ipad|iphone|ipod)/.test(I)};H.gecko=(navigator.product=="Gecko"&&!H.webkit&&!H.opera&&!H.ie);if(H.webkit){if(I.indexOf("chrome")>-1){H.chrome=true}else{H.safari=true}}var F=0;if(H.ie){if(J){F=parseFloat(J[1])}else{if(H.quirks||!document.documentMode){F=parseFloat(I.match(/msie (\d+)/)[1])}else{F=document.documentMode}}H.ie9Compat=F==9;H.ie8Compat=F==8;H.ie7Compat=F==7;H.ie6Compat=F<7||H.quirks}if(H.gecko){var K=I.match(/rv:([\d\.]+)/);if(K){K=K[1].split(".");F=K[0]*10000+(K[1]||0)*100+(K[2]||0)*1}}if(H.air){F=parseFloat(I.match(/ adobeair\/(\d+)/)[1])}if(H.webkit){F=parseFloat(I.match(/ applewebkit\/(\d+)/)[1])}var M=(!(H.ie&&F<7)&&!(H.gecko&&F<40000)&&!(H.webkit&&F<534));return M};vBulletin.ckeditor.fireCallbacks=function(I,G,F,H){if(F=="error"&&typeof G.error=="function"){G.error(I)}if(F=="success"&&typeof G.success=="function"){G.success.apply(H,[I,H])}if(typeof G.complete=="function"){G.complete(I)}};vBulletin.ckeditor.initEditor=function(H,G){G=G||{};H=vBulletin.ckeditor.verifyEditorId(H);console.log("Ckeditor: initEditor({0})".format(H));if(!vBulletin.ckeditor.checkEnvironment()){var F=C("#"+H).closest(".js-content-entry");F.find("li[data-panel=b-content-entry-panel__content--toggle-editor]").addClass("h-hide");F.find("li[data-panel=b-content-entry-panel__content--smiley]").addClass("h-hide");F.find("form").append(C('<input type="hidden" name="nl2br" value="1" />'));vBulletin.ckeditor.fireCallbacks(H,G,"error");return }if(vBulletin.ckeditor.requiredScriptsLoaded){vBulletin.ckeditor.doInitEditor(H,G)}else{vBulletin.ckeditor.loadScripts(H,G)}};vBulletin.ckeditor.loadScripts=function(H,G,F){if(vBulletin.ckeditor.requiredScriptLoadingStarted){console.warn("Ckeditor: Trying to load required scripts more than once.");return }vBulletin.ckeditor.requiredScriptLoadingStarted=true;G=G||{};H=H||"";if(typeof (G.hideLoadingDialog)!=="undefined"&&!G.hideLoadingDialog){vBulletin.ckeditor.showLoadingDialog(H)}var J=function(){if(G.showError||!vBulletin.ckeditor.requiredScriptsLoadFailed){openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("error_loading_ckeditor_script"),iconType:"warning"})}vBulletin.loadingIndicator.hide();vBulletin.ckeditor.requiredScriptsLoadFailed=true;vBulletin.ckeditor.fireCallbacks(H,G,"error")};var I=function(){if(!vBulletin.ckeditor.requiredScriptsLoadFailed){if(typeof F=="function"){F()}if(typeof vBulletin.ckeditor.doInitEditor=="function"&&window.CKEDITOR){vBulletin.ckeditor.requiredScriptsLoaded=true;vBulletin.ckeditor.doInitEditor(H,G)}else{setTimeout(I,10)}}else{vBulletin.ckeditor.fireCallbacks(H,G,"error");if(!G.hideLoadingDialog){vBulletin.ckeditor.hideLoadingDialog(H)}}};if(typeof vBulletin.ckeditor.doInitEditor!="function"&&!window.CKEDITOR){vBulletin.AJAX({url:vBulletin.getAjaxBaseurl()+"/ajax/render/ckeditor_javascript",success:function(L){var K=[];var M=/src="([^"]+)"/g;while(match=M.exec(L)){K.push(match[1])}var N=function(){if(K.length>0){console.log("Ckeditor: Calling getScript for: {0}".format(K[0]));C.getScript(K[0],function(O,Q,P){if(Q!="success"){console.warn("Ckeditor: Error loading "+K[0]);J();return false}console.log("Ckeditor: Script loaded: "+K[0]);K.splice(0,1);N()}).fail(function(P,Q,O){console.warn("Ckeditor: Error loading script: "+Q+" Exception: "+O);J()})}else{I()}};N()},error_phrase:"error_fetching_dialog"})}else{I()}};vBulletin.ckeditor.editorExists=function(F){return false};vBulletin.ckeditor.isEditorEmpty=function(F){return true};vBulletin.ckeditor.resetEditor=function(F){return false};vBulletin.ckeditor.getEditorContent=function(G){G=vBulletin.ckeditor.verifyEditorId(G);if(!G){return false}if(vBulletin.ckeditor.editorExists(G)){var F=vBulletin.ckeditor.getEditor(G);if(F&&F.getData){return C.trim(F.getData())}else{return false}}else{return C.trim(C("#"+G).val())}};vBulletin.ckeditor.focusEditor=function(G){G=vBulletin.ckeditor.verifyEditorId(G);if(!G){return }if(vBulletin.ckeditor.editorExists(G)){var F=vBulletin.ckeditor.getEditor(G);if(F){F.focus()}}else{C("#"+G).focus()}};vBulletin.ckeditor.loadingDialogStack={};vBulletin.ckeditor.showLoadingDialog=function(F){if((typeof vBulletin.ckeditor.loadingDialogStack[F]!="undefined")&&vBulletin.ckeditor.loadingDialogStack[F]){return }vBulletin.ckeditor.loadingDialogStack[F]=true;var G=C("#"+F);if(G.length>0&&G.is(":visible")){G.prop("disabled",true)}window.vBulletin.loadingIndicator.show("vBulletin.ckeditor.showLoadingDialog editorId: "+F)};vBulletin.ckeditor.hideLoadingDialog=function(F){if((typeof vBulletin.ckeditor.loadingDialogStack[F]=="undefined")||!vBulletin.ckeditor.loadingDialogStack[F]){return }vBulletin.ckeditor.loadingDialogStack[F]=false;C("#"+F).prop("disabled",false);window.vBulletin.loadingIndicator.hide("vBulletin.ckeditor.hideLoadingDialog editorId: "+F)};vBulletin.ckeditor.generatedIdCounter=0;vBulletin.ckeditor.verifyEditorId=function(G){G=G||"";if(typeof G=="string"){return G}else{if(typeof G=="object"&&typeof G.checkDirty!="undefined"&&typeof G.name!="undefined"){return G.name}else{var F=G instanceof C?G:C(G);if(!F.attr("id")){++vBulletin.ckeditor.generatedIdCounter;F.attr("id",("vb-cke-instance-"+vBulletin.ckeditor.generatedIdCounter))}return F.attr("id")}}};vBulletin.ckeditor.initEditorComponents=function(G,F){G=G||document;C(function(){C(".js-ckeditor-init-on-focus",G).off("focus").on("focus",function(){vBulletin.ckeditor.initEditor(C(this))});C(".js-ckeditor-init-on-page-load",G).each(function(){vBulletin.ckeditor.initEditor(C(this))});if(F){return }(function(){var J=function(L){return C(".js-content-entry-post-icons option",G).filter(function(){return(C(this).val()==L)}).data("icon-url")};var K=function(L){return C(".js-content-entry-post-icons option",G).filter(function(){return(C(this).val()==L)}).text()};var I=function(M){if(M==0){return C("<span />").html(vBulletin.phrase.get("no_icon")).get(0)}var N=J(M);if(N){var L=K(M);return C("<img />").attr("src",N).attr("alt","").attr("title",L).get(0)}else{return""}};C(".js-content-entry-post-icons",G).selectBox().change(function(){var L=C(this).val();C(".js-content-entry-post-icons.selectBox-dropdown .selectBox-label",G).html(I(L))});C(".js-content-entry-post-icons-selectBox-dropdown-menu li a").each(function(){var L=C(this).attr("rel");C(this).html(I(L))});C(".js-content-entry-post-icons",G).trigger("change")})();C(".js-content-entry-prefixes",G).selectBox();var H=[];C(".js-select-box",G).each(function(){var I=C(this),J;while(I.is(":hidden")){J=I.closest(".h-hide");if(J.length<1){break}H.push(J);J.removeClass("h-hide")}I.selectBox()});C.each(H,function(I,J){J.addClass("h-hide")})})};vBulletin.ckeditor.initEditorComponents(document);C(".js-focus-on-page-load").first().focus();vBulletin.errorAlert=function(G,F){openAlertDialog({title:G,message:F,iconType:"error"})};vBulletin.makeErrorAlertCallback=function(I,H,F,G){return(function(K,O,M){var J="";if(typeof K.status!="undefined"){J+=" "+K.status}if(O!=null){J+=" "+O}if(typeof M!="undefined"){J+=" "+M}var L=vBulletin.phrase.get(H)+"<br /><br />"+vBulletin.phrase.get("error_information_x",J);var N={title:I,message:H,callUrl:F,textStatus:O,jqXHRStatus:K.status,errorThrown:M};console.log(G+" Error callback: "+F);console.log(G+" Error data:");console.dir(N);vBulletin.errorAlert(vBulletin.phrase.get(I),L)})};vBulletin.makeAjaxSuccessCallback=function(G,H,K,I,J){var F=function(M){console.log(J+" Success callback: "+G.url);if(!M){if(!H.emptyResponse){console.log(J+" Success, Empty response.");vBulletin.errorAlert(vBulletin.phrase.get(G.title_phrase),vBulletin.phrase.get("invalid_server_response_please_try_again"))}else{H.emptyResponse.apply(this,arguments)}}else{if(M&&(M.errors||M.error)){var N=M.errors||M.error;if(!C.isArray(N)){N=[N]}var O=(C("#debug-information").length==1);if(O){console.log(J+" Success, API Error(S):");console.dir(N)}else{console.log(J+" Success, API Error.")}if(N[0]=="inlinemodauth_required"){return vBulletin.inlinemod.openAuthDialog({func:I,context:K,args:[H]})}if(G.api_error){var Q=G.api_error.apply(K,[N,M,G]);if(!Q){return }}var L=[],P="";C.each(N,function(){var S=this,R=S;if(C.isArray(S)){if(S[0]=="exception_trace"){P=S[1];return true}R=S[0]}var T=vBulletin.phrase.get(S);R=R!=T?(" ("+R+")"):"";L.push("<li>"+T+R+"</li>")});if(O&&P){L.push('<li><textarea style="border:1px solid #999;margin-top:10px;height:120px;width:100%;">'+P+"</textarea></li>")}if(O){L.push('<li><textarea style="border:1px solid #999;margin-top:10px;height:120px;width:100%;">'+JSON.stringify(M)+"</textarea></li>")}L="<ul>"+L.join("\n")+"</ul>";vBulletin.errorAlert(vBulletin.phrase.get(G.title_phrase),vBulletin.phrase.get("error_x",L));return false}else{if(H.success){console.log(J+" Success.");H.success.apply(this,arguments)}}}};return F};vBulletin.AJAX=function(G){var F={type:"POST",dataType:"json",title_phrase:"error",error_phrase:"error",api_error:false,element:null};C.extend(true,F,G);if(!F.url){F.url=vBulletin.getAjaxBaseurl()+F.call;F.call=""}if(!F.error){F.error=vBulletin.makeErrorAlertCallback(F.title_phrase,F.error_phrase,F.url,"vBulletin.AJAX")}F.success=vBulletin.makeAjaxSuccessCallback(F,G,this,vBulletin.AJAX,"vBulletin.AJAX");C.ajax(F)};vBulletin.ajaxForm=function(G){var F={dataType:"json",title_phrase:"error",error_phrase:"error",element:null,complete:function(){C(".button[type=submit]",this).prop("disabled",false)},beforeSerialize:function(H){C(".placeholder",H).each(function(){var I=C(this);if(I.val()==I.attr("placeholder")){I.val("")}})},beforeSubmit:function(J,I,H){C(".button[type=submit]",this).prop("disabled",true);return true}};C.extend(F,G);if(!F.error){F.error=vBulletin.makeErrorAlertCallback(F.title_phrase,F.error_phrase,F.url,"vBulletin.ajaxForm")}F.success=vBulletin.makeAjaxSuccessCallback(F,G,this,vBulletin.ajaxForm,"vBulletin.ajaxForm");this.ajaxForm(F)};vBulletin.doReplaceSecurityToken=function(F){if(typeof (F)=="undefined"||F==""){return }C("form").each(function(){var G=C(this);if(this.action&&!vBulletin.isInternalUrl(this.action)){console.log("Skipping security token for external url (form action): "+this.action);return true}if(typeof (this.method)!="undefined"&&this.method.toLowerCase()=="post"){if(G.find('input[name="securitytoken"]').length){G.find('input[name="securitytoken"]').val(F)}else{G.append('<input type="hidden" name="securitytoken" value="'+F+'" />')}}});pageData.securitytoken=F;console.log("Securitytoken updated")};window.openAlertDialog=function(K){var J=C("#alert-dialog");K=K||{};if(!J.data("created")){J.dialog({autoOpen:false,zIndex:10100,modal:true,resizable:false,closeOnEscape:false,showCloseButton:false,dialogClass:"dialog-container alert-dialog-container dialog-box",create:function(){J.data("created",true)}})}J.dialog("option","width",K.width||500);J.dialog("option","title",K.title||vBulletin.phrase.get("alert"));var G=J.find(".dialog-content");var H=G.find(".message");var F=G.find(".icon");var I=C("#btnAlertDialogOK");if(K.maxHeight){G.css({"max-height":K.maxHeight,overflow:"auto"})}else{G.css({"max-height":"",overflow:""})}if(K.message){H.html(K.message)}F.removeClass(function(L,M){return(M.match(/\S+-icon\b/g)||[]).join(" ")});K.buttonLabel=K.buttonLabel||vBulletin.phrase.get("ok");I.html(K.buttonLabel);J.find(".js-button").toggleClass("b-button--sitebuilder",C("body").is(".edit-mode, .js-edit-mode-style"));J.off("dialogopen").on("dialogopen",function(){I.off("click").on("click",function(){if(typeof K.onBeforeClose=="function"){K.onBeforeClose.apply(this)}J.dialog("close")}).focus()});J.off("dialogclose").on("dialogclose",function(){if(typeof K.onAfterClose=="function"){K.onAfterClose.apply(I)}});switch(K.iconType){case"warning":F.addClass("warning-icon vb-icon vb-icon-warning");F.show();break;case"error":F.addClass("error-icon vb-icon vb-icon-error");F.show();break;default:F.addClass("no-icon").hide()}J.dialog("open");return J};window.openConfirmDialog=function(J){J=J||{};var F=C("#confirm-dialog");if(!F.data("created")){F.dialog({autoOpen:false,modal:true,resizable:false,closeOnEscape:false,showCloseButton:false,create:function(){F.data("created",true)}})}var M=J.title||vBulletin.phrase.get("confirmation");F.dialog("option","title",M);F.closest(".ui-dialog").find(".ui-dialog-title").html(M);var N=F.find(".dialog-content");var K=N.find(".message");var L=N.find(".icon");if(J.message){K.html(J.message.replace("\n","<br />"))}F.dialog("option","width",(J.width?J.width:500));F.dialog("option","dialogClass","dialog-container confirm-dialog-container dialog-box "+(J.dialogClass||""));L.removeClass(function(O,P){return(P.match(/\S+-icon\b/g)||[]).join(" ")});J.buttonLabel=J.buttonLabel||{};J.buttonLabel.yesLabel=J.buttonLabel.yesLabel||vBulletin.phrase.get("yes");J.buttonLabel.noLabel=J.buttonLabel.noLabel||vBulletin.phrase.get("no");var H=C("#btnConfirmDialogYes").html(J.buttonLabel.yesLabel);var I=C("#btnConfirmDialogNo").html(J.buttonLabel.noLabel);H.addClass("b-button--primary").removeClass("b-button--secondary");I.addClass("b-button--secondary").removeClass("b-button--primary");F.find(".js-button").toggleClass("b-button--sitebuilder",C("body").is(".edit-mode, .js-edit-mode-style"));var G;F.off("dialogopen").on("dialogopen",function(){var P=C("#btnConfirmDialogYes").off("click").on("click",function(){G=this;var R,Q;if(typeof J.onClickYes=="function"){R=J.onClickYes.apply(this);if(typeof J.onClickYesWithAjax!="undefined"&&J.onClickYesWithAjax){return false}}if(R===false){return false}if(typeof J.onBeforeClose=="function"){Q=J.onBeforeClose.apply(this);if(typeof J.onBeforeCloseWithAjax!="undefined"&&J.onBeforeCloseWithAjax){return false}}if(Q===false){return false}F.dialog("close")}).focus();var O=C("#btnConfirmDialogNo").off("click").on("click",function(){G=this;if(typeof J.onClickNo=="function"){J.onClickNo.apply(this)}if(typeof J.onBeforeClose=="function"){J.onBeforeClose.apply(this)}F.dialog("close")})});F.off("dialogclose").on("dialogclose",function(P,O){if(typeof J.onAfterClose=="function"){J.onAfterClose.apply(G)}});switch(J.iconType){case"warning":L.addClass("warning-icon vb-icon vb-icon-warning");L.show();break;case"question":L.addClass("question-icon");L.show();break;default:L.addClass("no-icon").hide()}F.dialog("open");return F};window.openPromptDialog=function(I){var K=C("#prompt-dialog");if(!K.data("created")){K.dialog({autoOpen:false,modal:true,resizable:false,closeOnEscape:false,showCloseButton:false,width:500,dialogClass:"dialog-container prompt-dialog-container dialog-box",create:function(){K.data("created",true)}})}I=I||{};K.dialog("option","title",I.title||vBulletin.phrase.get("prompt"));var N=K.find(".dialog-content"),J=N.find(".message"),L;if(I.message){J.html(I.message)}var F=I.initialValue||"";if(!I.multiline){L=K.find("input.input-box").val(F).removeClass("h-hide");L.next().addClass("h-hide");if(Number(I.maxlength)){L.attr("maxlength",Number(I.maxlength))}else{L.removeAttr("maxlength")}N.addClass("table");N.find("> div").addClass("td")}else{L=K.find("textarea.input-box").val(F).removeClass("h-hide");L.prev().addClass("h-hide");N.removeClass("table");N.find("> .td").removeClass("td")}I.buttonLabel=I.buttonLabel||{};I.buttonLabel.okLabel=I.buttonLabel.okLabel||vBulletin.phrase.get("ok");I.buttonLabel.cancelLabel=I.buttonLabel.cancelLabel||vBulletin.phrase.get("cancel");var M=C("#btnPromptDialogOK").html(I.buttonLabel.okLabel),H=C("#btnPromptDialogCancel").html(I.buttonLabel.cancelLabel),G;K.find(".js-button").toggleClass("b-button--sitebuilder",C("body").is(".edit-mode, .js-edit-mode-style"));K.off("dialogopen").on("dialogopen",function(){var P=C("#btnPromptDialogOK").off("click").on("click",function(){G=this;var R=C.trim(L.val()),Q,S;if(I.validation&&typeof I.validation=="object"){if(I.validation.override&&typeof I.validation.custom=="function"){if(!I.validation.custom.apply(this,[L])){return false}}else{switch(I.validation.type){case"number":R=Number(R);if(isNaN(R)){if(I.validation.showError){openAlertDialog({title:K.dialog("option","title"),message:"Input must be a number.",iconType:"warning",onAfterClose:function(){L.trigger("select").trigger("focus")}})}else{L.trigger("select").trigger("focus")}return false}if(I.validation.range&&typeof I.validation.range=="object"){if(R<I.validation.range.min||R>I.validation.range.max){if(I.validation.showError){openAlertDialog({title:K.dialog("option","title"),message:"Input must be within "+I.validation.range.min+" - "+I.validation.range.max+" only.",iconType:"warning",onAfterClose:function(){L.trigger("select").trigger("focus")}})}else{L.trigger("select").trigger("focus")}return false}}break;case"string":default:if(!R){if(I.validation.showError){openAlertDialog({title:K.dialog("option","title"),message:"Input required.",iconType:"warning",onAfterClose:function(){L.trigger("select").trigger("focus")}})}else{L.trigger("select").trigger("focus")}return false}else{if(I.multiline&&R.length>I.maxlength){if(I.validation.showError){openAlertDialog({title:K.dialog("option","title"),message:"Input too long. Maximum allowed is "+I.maxlength+" characters.",iconType:"warning",onAfterClose:function(){L.trigger("select").trigger("focus")}})}else{L.trigger("select").trigger("focus")}return false}}}if(I.validation.set&&C.isArray(I.validation.set)&&I.validation.set.length>0){if(C.inArray(R,I.validation.set)==-1){if(I.validation.showError){openAlertDialog({title:K.dialog("option","title"),message:"Input must be one of these: "+I.validation.set.join(", ")+".",iconType:"warning",onAfterClose:function(){L.trigger("select").trigger("focus")}})}else{L.trigger("select").trigger("focus")}return false}}if(typeof I.validation.custom=="function"){if(!I.validation.custom.apply(this,[L])){return false}}}}if(typeof I.onClickOK=="function"){S=I.onClickOK.apply(this,[R]);if(typeof I.onClickOKWithAjax!="undefined"&&I.onClickOKWithAjax){return false}}if(S===false){return false}if(typeof I.onBeforeClose=="function"){Q=I.onBeforeClose.apply(this);if(typeof I.onBeforeCloseWithAjax!="undefined"&&I.onBeforeCloseWithAjax){return false}}if(Q===false){return false}K.dialog("close")}).trigger("focus");var O=C("#btnPromptDialogCancel").off("click").on("click",function(){G=this;if(typeof I.onClickCancel=="function"){I.onClickCancel.apply(this)}if(typeof I.onBeforeClose=="function"){I.onBeforeClose.apply(this)}K.dialog("close")})});K.off("dialogclose").on("dialogclose",function(){if(typeof I.onAfterClose=="function"){I.onAfterClose.apply(G);L.val("")}});K.dialog("open");L.trigger("focus");return K};window.openLoadingDialog=function(){console.warn("Function openLoadingDialog is deprecated.");window.vBulletin.loadingIndicator.show("openLoadingDialog")};window.closeLoadingDialog=function(){console.warn("Function closeLoadingDialog is deprecated.");window.vBulletin.loadingIndicator.hide("closeLoadingDialog")};window.bindFormReset=function(F){return C(F).on("reset",function(G,H){if(typeof H=="function"){H()}})};window.vBulletin=window.vBulletin||{};vBulletin.sitebuilder=vBulletin.sitebuilder||{};vBulletin.sitebuilder.toggleSitebuilder=function(F){var G=C(this);if(G.closest("li").hasClass("h-disabled")||G.closest("ul").hasClass("h-disabled")){return true}if(G.hasClass("on")){C.removeCookie(pageData.sb_state_cookie,{path:pageData.cookie_path,domain:pageData.cookie_domain});C("#main-navbar .main-nav").hide();G.removeClass("on");return true}if(C("#main-navbar .main-nav li").length>0){C("#main-navbar .main-nav").show();G.addClass("on");C.cookie(pageData.sb_state_cookie,"1",{path:pageData.cookie_path,domain:pageData.cookie_domain});return true}vBulletin.sitebuilder.loadSitebuilderMarkup(true);return true};vBulletin.sitebuilder.loadSitebuilderMarkup=function(F,H){F=F||false;function G(){if(typeof H=="function"){return H()}}if(C("#sitebuilder-wrapper").is(".js-sb-loaded")){return G()}vBulletin.AJAX({url:vBulletin.getAjaxBaseurl()+"/ajax/activate-sitebuilder",data:{pageid:pageData.pageid,nodeid:pageData.nodeid,userid:pageData.userid,loadMenu:F},cache:false,isAjaxTemplateRender:true,isAjaxTemplateRenderWithData:true,success:function(I){if(I&&I.templates){if(F){C("head").append(I.templates.css);C("#main-navbar .main-nav").hide().html(I.templates.menu)}C("#sitebuilder-wrapper").prepend(I.templates.main);C("#main-navbar .main-nav").show();C(".edit-switch-container .switch-control").addClass("on");C("#sitebuilder-wrapper").addClass("js-sb-loaded");C.cookie(pageData.sb_state_cookie,"1",{path:pageData.cookie_path,domain:pageData.cookie_domain});return G()}else{console.log("activating sitebuilder failed!");openAlertDialog({title:"Error",message:"Error activating SiteBuilder.<br /><br />Please try again.",iconType:"error"})}}})};vBulletin.sitebuilder.menuClickProxy=function(){var F=this;vBulletin.sitebuilder.loadSitebuilderMarkup(false,function(){C("#main-navbar .sb-menu").off("click",vBulletin.sitebuilder.menuClickProxy);C(F).find("a").click()});return false};if(typeof (tzOffset)!="undefined"){var E=new Date().getTimezoneOffset()/60;if(Math.abs(tzOffset+E)==1){vBulletin.AJAX({call:"/profile/save-dst",data:{userid:pageData.userid,clientUtcOffset:E},success:function(){window.location.reload()},api_error:function(F){},error:function(){}})}}setTimeout(function(){if(!C.support.selectstart){C.fn.extend({disableSelection:function(){return this.each(function(){C(this).css({"-moz-user-select":"-moz-none","-webkit-user-select":"none","-khtml-user-select":"none","-o-user-select":"none","user-select":"none"})})},enableSelection:function(){return this.each(function(){C(this).css({"-moz-user-select":"","-webkit-user-select":"","-khtml-user-select":"","-o-user-select":"","user-select":""})})}})}function J(){window.vBulletin.loadingIndicator.init();C(document).off("click","a.animate-scroll").on("click","a.animate-scroll",function(){var R=vBulletin.scrollToAnchor(this.hash);if(R){window.location.href=this.href}return false});var Q=function(R){C(this).closest(".split-button").toggleClass("open").find(".submenu").toggleClass("h-hide");C("body").off("click.buttonset").on("click.buttonset",function(S){if(C(S.target).closest(".split-button").length==0){C(".split-button").removeClass("open").find(".submenu").addClass("h-hide");C("body").off("click.buttonset")}})};C(".split-button .button-text").button().closest(".button-set").find(".js-button__icon").button({text:false,icons:{primary:"vb-icon vb-icon-triangle-down-wide"}}).on("click",Q).closest(".button-set").buttonset().filter(".one-click").find(".button-text").on("click",Q);C(document).off("click",".canvas-widget .toggle-button").on("click",".canvas-widget .toggle-button",function(U,R){var T=C(this),V=T.closest(".canvas-widget");if(T.hasClass("expand")){if(R){C(".widget-content",V).show()}else{C(".widget-content",V).slideDown("slow")}V.removeClass("collapsed")}else{if(R){C(".widget-content",V).hide()}else{C(".widget-content",V).slideUp("slow")}V.addClass("collapsed")}T.toggleClass("collapse expand");var S=T.attr("title");T.attr("title",T.data("toggle-title")).data("toggle-title",S);return false});C(".conversation-toolbar-wrapper form.toolbar-filter-overlay").trigger("reset");var O=!!("placeholder" in document.createElement("input"));if(!O){var N=C("input[placeholder], textarea[placeholder]");N.filter(":focus").addClass("js-temp-focus").blur();N.placeholder();var P=function(S){var R=N.filter(".js-temp-focus").focus();if(S){R.removeClass("js-temp-focus")}};C(window).on("load.placeholder_temp",function(){P(true);C(window).off("load.placeholder_temp")});P()}if(C("textarea.autogrow").length>0){C("textarea.autogrow").elastic().off("blur.elastic")}C(".edit-switch-container .switch-control").on("mousedown",vBulletin.sitebuilder.toggleSitebuilder);C("#main-navbar .lnkAdminCP").removeClass("h-disabled");C("#main-navbar .sb-menu").removeClass("h-disabled").on("click",vBulletin.sitebuilder.menuClickProxy);C("select.custom-dropdown").selectBox();C(document).off("keypress",".js-button").on("keypress",".js-button",function(R){if(R.which==32||R.which==13){if(R.target&&R.target.nodeName&&(R.target.nodeName+"").toLowerCase()=="label"&&C(R.target).find("input").length==1){C(R.target).find("input").trigger("click")}else{C(this).trigger("click")}R.preventDefault()}});C(document).off("keypress",".js-link").on("keypress",".js-link",function(R){if(R.which==13){C(this).trigger("click");R.preventDefault()}});C(".js-debug-collapse-list").next("ol, ul").hide();C(document).off("click",".js-debug-collapse-list").on("click",".js-debug-collapse-list",function(R){C(this).next("ol, ul").toggle()});C(document).off("click",".js-toggle-slider").on("click",".js-toggle-slider",function(){var U=C(this);if(U.is(".b-toggle-slider--yes")){U.removeClass("b-toggle-slider--yes").addClass("b-toggle-slider--no");U.find(".b-toggle-slider__radio--no").prop("checked",true);U.data("value","0")}else{U.removeClass("b-toggle-slider--no").addClass("b-toggle-slider--yes");U.find(".b-toggle-slider__radio--yes").prop("checked",true);U.data("value","1")}var T=C(".js-toggle-slider, .js-toggle-slider__dependent"),R=T.index(U),S=false;T.each(function(V,W){if(V==R){S=true}else{if(S==true){var X=C(this);if(X.is(".js-toggle-slider__dependent")){X.toggleClass("h-hide")}else{S=false;return false}}}});U.trigger("change",U.data("value"));return false});C(".js-select-box").selectBox();C(".mainmenu li:has(.submenu)").on("click",function(R){C(".submenu",this).show();return false}).hover(function(){},function(R){C(".submenu",this).hide()});C(".mainmenu.textControls li").on("click",function(R){if(C(".tagCtrl",this).length==0){C("#tag-dialog").hide()}});C(".mainmenu .submenu li a").on("click",function(S){var R=C(this).closest(".js-comp-menu-dropdown");if(R.length){R.removeClass("b-comp-menu-dropdown--open")}else{C(this).closest(".submenu").hide()}});C(".channel-content-widget .new-conversation-btn").off("click").on("click",function(){window.location.href=pageData.baseurl+"/new-content/"+pageData.channelid});C(".pagenav-form").submit(function(){if(Number(this.page.value)>0){location.href=this.action+"&p="+this.page.value}return false}).trigger("reset");C(".toolbar-pagenav").off("keydown",".toolbar-pagenav input").on("keydown",".toolbar-pagenav input",function(S){var R=S.which;if(!S.shiftKey&&!S.altKey&&!S.ctrlKey&&((R>=48&&R<=57)||(R>=96&&R<=105)||R==8||R==9||R==13||R==35||R==36||R==37||R==39||R==46||R==45)){return true}return false});C(document).off("click",".js-post__manage").on("click",".js-post__manage",function(){if(typeof vBulletin.inlinemod=="undefined"){var S=vBulletin.getAjaxBaseurl()+"/js/inlinemod.js?v="+pageData.simpleversion,R=this;C.getScript(S,function(){vBulletin.inlinemod.manage_deleted_form.apply(R)}).error(function(){openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("error_loading_inlinemod_script"),iconType:"warning"})})}else{vBulletin.inlinemod.manage_deleted_form.apply(this)}});C(document).off("click",".js-post__show-hide").on("click",".js-post__show-hide",function(){var T=C(this),S=T.text(),R=T.data("toggle-text");if(T.hasClass("js-post__show-hide--show")){T.closest(".js-post").addClass("b-post--show-deleted-content");T.html(R).data("toggle-text",S).removeClass("js-post__show-hide--show")}else{T.closest(".js-post").removeClass("b-post--show-deleted-content");T.html(R).data("toggle-text",S).addClass("js-post__show-hide--show")}});C(document).off("click","a.video-frame").on("click","a.video-frame",function(T){T.preventDefault();var S={code:this.getAttribute("data-vcode"),provider:this.getAttribute("data-vprovider")};if(this.getAttribute("data-height")){S.height=this.getAttribute("data-height")}if(this.getAttribute("data-width")){S.width=this.getAttribute("data-width")}var R=C(this);C.post(vBulletin.getAjaxBaseurl()+"/ajax/render/bbcode_video",S,function(U){if(U){R.replaceWith(U)}},"json")});vBulletin.markreadcheck();C(document).off("click","a.markchannelsread, a.navbar_mark_channels_read").on("click","a.markchannelsread, a.navbar_mark_channels_read",function(){vBulletin.markchannelsread(0,{success:function(){location.reload()},failed:function(){openAlertDialog({title:vBulletin.phrase.get("forum"),message:"Mark Channels Read failed: {0}".format(result),iconType:"error"})}},C(this));return false});C(".js-footer-go-to-top").off("click").on("click",function(R){R.preventDefault();C("body,html").animate({scrollTop:0},800)})}function L(){window.clearTimeout(N);if(pageData.securitytoken!="guest"){var N=window.setTimeout(L,3600000);C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/replace-securitytoken",data:{securitytoken:pageData.securitytoken},type:"POST",dataType:"json",success:function(P){if(P&&!P.error){var O=0;vBulletin.doReplaceSecurityToken(P.newtoken)}else{console.log("/ajax/replace-securitytoken, error: "+error);if(++O==3){vBulletin.doReplaceSecurityToken("guest")}}},error:function(Q,P,O){console.log("/ajax/replace-securitytoken, error: "+O);if(++F==3){vBulletin.doReplaceSecurityToken("guest")}}})}}function I(){if(typeof (pageData.adminAction)!="undefined"){vBulletin.assertUserHasAdminPermission("canusesitebuilder",self,function(){},function(){window.location.reload()})}if(vBulletin.options.get("crontab")){if(pageData.nextcron<=pageData.current_server_datetime){vBulletin.loadingIndicator.suppressNextAjaxIndicator();C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/apidetach/cron/run",type:"POST",dataType:"json",success:function(N){if(N&&N.errors){console.warn("Cron error: "+vBulletin.phrase.get(N.errors[0][0]))}console.log("Cron run successfully.")},error:function(P,O,N){console.warn("Error when running cron: {0}".format(N))}})}else{}}}J();C("#searchPopupControl").on("click",function(N){if(C(this).hasClass("open")){C(this).removeClass("open");C("#searchPopupContent").hide()}else{C(this).addClass("open");C("#searchPopupContent").show()}});C("html").on("click",function(N){if(C(N.target).closest("#searchForm").size()==0&&C("#searchPopupControl").hasClass("open")){C("#searchPopupControl").removeClass("open");C("#searchPopupContent").hide()}});C("#btnAdvSearch").off("click").on("click",function(O){O.preventDefault();C(this).data("clicked2submit",1);var N=C("#searchForm");C('<input type="hidden" name="AdvSearch" value="1" />').appendTo(N);N.submit()});C("#searchForm").off("submit.searchform").on("submit.searchform",function(R){var T={},P=C("#q");if(C.trim(P.val()).length>0){T.keywords=C.trim(P.val())}else{if(!C("#btnAdvSearch").data("clicked2submit")){openAlertDialog({title:vBulletin.phrase.get("search"),message:vBulletin.phrase.get("please_provide_search_string"),iconType:"warning",onAfterClose:function(){C("#searchForm #q").focus()}});R.stopPropagation();return false}}var O=C(this).find("#searchPopupContent"),S=O.find(".searchFields_title_only");if(S.size()>0&&S.prop("checked")){T.title_only=1}var N=O.find(".searchFields_author");if(N.size()>0&&N.prop("checked")){T.author=[N.val()]}var Q=O.find(".searchFields_channel");if(Q.size()>0&&Q.prop("checked")){T.channel=[Q.val()]}O.find("input[name=searchJSON]").val(JSON.stringify(T));return true});C(".history-backbutton").off("click").on("click",function(N){history.back()});C(".popupControl[popup-body]").off("click").on("click",function(O){var P=C(this).attr("popup-body");if(!P){return false}var N=C(this).parent().find("."+P);if(!N){return false}C(N).toggleClass("h-hide")});var M;if(!(M=C.cookie(pageData.cookie_prefix+"np_notices_displayed"))){M=new Array()}if(!(M instanceof Array)){M=new Array(M)}C('ul.notices li[data-notice-persistent="0"]').each(function(N){M.push(C(this).attr("data-notice-id"))});if(M.length>0){C.cookie(pageData.cookie_prefix+"np_notices_displayed",M,{path:pageData.cookie_path,domain:pageData.cookie_domain})}else{C.cookie(pageData.cookie_prefix+"np_notices_displayed",null,{path:pageData.cookie_path,domain:pageData.cookie_domain})}C("ul.notices > li > .close").off("click").on("click",function(N){var P=C(this).closest("li"),O=P.attr("data-notice-id");C("body").css("cursor","wait");C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/notice/dismiss",data:{noticeid:O},type:"POST",dataType:"json",complete:function(){C("body").css("cursor","auto")},success:function(Q){if(Q&&!Q.error){console.log("Notice dismissed successfully!");P.hide("slow",function(){if(C(this).parent().find(">li:visible").length==0){C(this).parent().addClass("h-hide")}})}},error:function(S,R,Q){console.log("Notice dismissed failed! error:"+Q);openAlertDialog({title:"Error",message:"Error dismissing the notice.",iconType:"error"})}})});C("#frmActivateuser").ajaxForm({dataType:"json",beforeSubmit:function(Q,P,O){var N="",R="";if(C.trim(C(".username",P).val())==""){N=vBulletin.phrase.get("please_enter_a_username");R=".username"}else{if(C.trim(C(".activateid",P).val())==""){N=vBulletin.phrase.get("requiredfieldmissing",vBulletin.phrase.get("activation_code"));R=".activateid"}}if(N){openAlertDialog({title:vBulletin.phrase.get("error"),message:N,iconType:"warning",onAfterClose:function(){C(R,P).focus()}});return false}return true},success:function(P,R,S,O){if(P&&P.response&&P.response.errors){var T=[];for(var N in P.response.errors){if(P.response.errors[N][0]!="exception_trace"&&P.response.errors[N][0]!="errormsg"){T.push(vBulletin.phrase.get(P.response.errors[N]))}}openAlertDialog({title:vBulletin.phrase.get("error"),message:T.join("<br />"),iconType:"warning",onAfterClose:function(){vBulletin.hv.reset(true)}})}else{var Q=P.response.msg_params;Q.unshift(P.response.msg);openAlertDialog({title:vBulletin.phrase.get("activate_your_account"),message:vBulletin.phrase.get.apply(vBulletin.phrase,Q),onAfterClose:function(){window.location.href=pageData.baseurl}})}}});C("#frmActivateemail").ajaxForm({dataType:"json",beforeSubmit:function(Q,P,O){var N="",R="";if(C.trim(C(".email",P).val())==""){N=vBulletin.phrase.get("please_enter_your_email_address")}else{if(!isValidEmailAddress(C(".email",P).val())){N=vBulletin.phrase.get("invalid_email_address")}}if(N){openAlertDialog({title:vBulletin.phrase.get("error"),message:N,iconType:"warning",onAfterClose:function(){C(R,P).focus()}});return false}return true},success:function(P,R,S,O){if(P&&P.response&&P.response.errors){var T=[];for(var N in P.response.errors){if(P.response.errors[N][0]!="exception_trace"&&P.response.errors[N][0]!="errormsg"){T.push(vBulletin.phrase.get(P.response.errors[N]))}}openAlertDialog({title:vBulletin.phrase.get("error"),message:T.join("<br />"),iconType:"warning",onAfterClose:function(){vBulletin.hv.reset(true)}})}else{var Q=P.response.msg_params;Q.unshift(P.response.msg);openAlertDialog({title:vBulletin.phrase.get("email_activation_codes"),message:vBulletin.phrase.get.apply(vBulletin.phrase,Q),onAfterClose:function(){window.location.href=pageData.baseurl}})}}});var H=C.cookie(pageData.cookie_prefix+"userstyleid");if(H){C(".stylechooser").val(H)}C(".stylechooser").change(function(){var N=C("option:selected",C(this)).val(),O=new Date();O.setDate(O.getDate()+365);C.cookie(pageData.cookie_prefix+"userstyleid",N,{path:pageData.cookie_path,domain:pageData.cookie_domain,expires:O});window.location.reload()});var K=C.cookie(pageData.cookie_prefix+"languageid");if(K){C(".languagechooser").val(K)}C(".languagechooser").change(function(){var N=C("option:selected",C(this)).val(),O=new Date();O.setDate(O.getDate()+365);C.cookie(pageData.cookie_prefix+"languageid",N,{path:pageData.cookie_path,domain:pageData.cookie_domain,expires:O});window.location.reload()});C("a.navbar_profile").on("click",function(){if(pageData.userid=="0"){C("#lnkLoginSignupMenu").click();return false}});vBulletin.doReplaceSecurityToken(pageData.securitytoken);var G=window.setTimeout(L,3600000),F=0;setTimeout(I,5)},1);vBulletin.getQueryString=function(G){if(G==""){return{}}var F={};for(var H=0;H<G.length;++H){var I=G[H].split("=");if(I.length!=2){continue}F[I[0]]=decodeURIComponent(I[1].replace(/\+/g," "))}return F};vBulletin.triggerHandler=function(F,H,I){if(!H||H.length==0){H=C(document)}else{if(!(H instanceof C)){H=C(H)}}I=I||[];var G=C.Event(F);G.target=this instanceof C?this.get(0):this;return H.triggerHandler(G,I)};C.widget("ui.dialog",C.ui.dialog,{_allowInteraction:function(F){if(this._super(F)){return true}if(F.target.ownerDocument!=this.document[0]){return true}if(C(F.target).closest(".cke_dialog").length){return true}if(C(F.target).closest(".cke").length){return true}}})})(jQuery);function JShtmlEncode(B){var A="";if(B&&typeof B!=="undefined"&&B.length>0){A=$("<div/>").text(B).html()}A=String(A).replace(/"/g,"&quot;");return A}function showPhotoDialog(A){$("#gallery_dialog"+A).dialog()}function displayPositionedPopup(E){if(E.dialog){E.dialog=$(E.dialog)}if(!E.dialog||E.dialog.size()==0){E.dialog=$("<div />").html('<h3><label class="h-left">'+E.title+'</label><label class="h-right btnClose">x</label><div class="h-clear"></div></h3><div class="content"></div><div class="arrow"><div class="arrowOver"></div></div>').addClass("custom-dialog").css("z-index",1100).appendTo(document.body);if(E.className){E.dialog.addClass(E.className)}if(E.width){E.dialog.css("width",E.width)}if(typeof E.id=="string"){E.dialog.prop("id",E.id)}E.dialog.find(".btnClose").on("click",function(){E.dialog.fadeOut();return false})}if(E.content){if(typeof E.content=="string"){E.dialog.find(".content").html(E.content);if(typeof E.loaded=="function"){E.loaded(E)}E.dialog.show()}else{if(typeof E.content=="function"){E.dialog.find(".content").html('<span class="text">Loading...</span><span class="loading-icon"><img width="16" height="16" alt="" src="'+pageData.baseurl+'/images/ajax-loader.gif"></span>');E.dialog.show();window.setTimeout(function(){E.content(E)},1)}}}var A=$("#wrapper").offset(),D=$("#wrapper").outerWidth(),N=$(E.target).offset(),K=$(E.target).outerWidth(),I=$(E.target).outerHeight(),F=E.dialog.outerWidth(),M=E.dialog.find(".arrow"),H=M.outerWidth(),L=M.outerHeight(),C=F-M.position().left-H,B=N.left+(K/2)-F+C+(H/2)-2;if(B<A.left){var G=parseInt(M.css("right"));M.css("left",G);C=G+H;B=N.left+(K/2)-C+(H/2)-2}var J=N.top+I+L;E.dialog.css({left:B,top:J});if(typeof E.ready=="function"){E.ready(E)}}function closePhotoDialog(A){$("#gallery_dialog"+A).close()}function isValidEmailAddress(B){var A=new RegExp(/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/i);return A.test(B)}function str_repeat(D,C){var B="";for(var A=0;A<C;A++){B=B.concat(D)}return B}function showStatusMessage(A,F){var C=$(".conversation-status-message.notice"),E;if(C.length>0){var B=C.filter("."+F);if(B.length==1){C=B}else{if((E=C.filter(".h-hide")).length==1){C=E}else{C=C.first().clone().removeClass().addClass("conversation-status-message notice").appendTo(".conversation-status-messages")}}C=(B.length==1?B:C).show();if(!vBulletin.isScrolledIntoView(C)){var D=C.offset().top-10;C.hide();$("html,body").animate({scrollTop:D},"slow",function(){C.find("span").html(A).end().addClass(F+" show-x").fadeIn("slow","linear")})}else{if(C.hasClass("h-hide")){C.hide().removeClass("h-hide").addClass(F+" show-x").find("span").html(A).end().fadeIn(800,"linear")}else{C.fadeOut("slow","linear",function(){C.find("span").html(A).end().addClass(F+" show-x").fadeIn("slow","linear")})}}}}window.vBulletin.htmlEntities=function(A){return String(A).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'"'/g,"&quot;")};window.vBulletin.htmlEntities_decode=function(A){return String(A).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"')};window.vBulletin.loadedIds=window.vBulletin.loadedIds||[];window.vBulletin.isAlreadyLoaded=function(A){if($.inArray(A,window.vBulletin.loadedIds)!=-1){return true}window.vBulletin.loadedIds.push(A)};
/*=======================================================================*\
|| ###################################################################### ||
|| # vBulletin 5.2.3
|| # ------------------------------------------------------------------ # ||
|| # Copyright 2000-2016 vBulletin Solutions Inc. All Rights Reserved.  # ||
|| # This file may not be redistributed in whole or significant part.   # ||
|| # ----------------- VBULLETIN IS NOT FREE SOFTWARE ----------------- # ||
|| # http://www.vbulletin.com | http://www.vbulletin.com/license.html   # ||
|| ###################################################################### ||
\*========================================================================*/
window.vBulletin=window.vBulletin||{};window.vBulletin.phrase=window.vBulletin.phrase||{};window.vBulletin.phrase.precache=window.vBulletin.phrase.precache||["more_options"];(function(E){function B(J,H,I){function L(M,N){if(M.is("."+N)){M.removeClass(N);var O=M.data("removed-classes")||[];if(E.inArray(N,O)==-1){O.push(N)}M.data("removed-classes",O)}}function K(M,O){if(!M.is("."+O)){M.addClass(O);var N=M.data("added-classes")||[];if(E.inArray(O,N)==-1){N.push(O)}M.data("added-classes",N)}}J.each(function(){var M=E(this);E.each(H,function(N,O){L(M,O)});E.each(I,function(N,O){K(M,O)})})}function G(H){H.each(function(){var I=E(this),K=I.data("added-classes")||[],J=I.data("removed-classes")||[];if(K.length){I.removeClass(K.join(" "))}if(J.length){I.addClass(J.join(" "))}})}function A(J,L,K){if(L=="dropdown"){var I=J.find(".current").addClass("b-comp-menu-dropdown__content-item--current");K.addClass("b-comp-menu-dropdown--main-menu").find(".js-comp-menu-dropdown__trigger").addClass("b-comp-menu-dropdown__trigger--has-icon").html('<span class="b-icon b-icon__hamburger h-align-middle"></span>');J.find("li").first().addClass("b-comp-menu-dropdown__content-item--divider");var H='<li class="js-search-item"><form action="'+E("#searchForm").attr("action")+'"><input type="text" autocomplete="off" class="b-form-input__input search-term" placeholder="'+vBulletin.phrase.get("search")+'..." name="q"><button title="'+vBulletin.phrase.get("search")+'" class="search-btn" type="submit"><span class="vb-icon vb-icon-search"></span></button></form></li><li class="js-search-item"><a href="'+pageData.baseurl+'/search">'+vBulletin.phrase.get("advanced_search")+"</a></li>";E(H).prependTo(J);E(".js-channel-subtabbar-list li").addClass("js-subtabbar-item b-comp-menu-dropdown__content-item--indent1").insertAfter(I)}else{J.find("li").removeClass("b-comp-menu-dropdown__content-item--divider b-comp-menu-dropdown__content-item--current b-comp-menu-dropdown__content-item--indent1");J.find(".js-search-item").remove();J.find(".js-subtabbar-item").appendTo(E(".js-channel-subtabbar-list"))}}function C(K,O){if(O=="dropdown"){var H=K.data("dropdown-icon-classes")||"",N=H?" b-comp-menu-dropdown__trigger--has-icon":"",M=E('<div class="b-comp-menu-dropdown js-comp-menu-dropdown"><div class="b-comp-menu-dropdown__trigger js-comp-menu-dropdown__trigger'+N+'"><span class="'+H+'">'+vBulletin.phrase.get("more_options")+"</span></div></div>");M.insertAfter(K);if(K.is(".js-comp-menu-dropdown__content--main-menu")){A(K,O,M)}var I=K.find("li");var L=K.find("a");var J=["h-right","h-left"];E.each(J,function(P,Q){if(K.is("."+Q)){M.addClass(Q)}});B(K,["h-margin-top-s","h-right","b-comp-menu-horizontal","channel-tabbar-list","h-hide-on-small"],["b-comp-menu-dropdown__content","js-comp-menu-dropdown__content"]);B(I,["h-margin-top-xs","b-post-control","b-post-control--responsive"],["b-comp-menu-dropdown__content-item"]);B(L,["h-left"],["h-block"]);K.appendTo(M);vBulletin.CompMenuDropdown.init()}else{var I=K.find("li");var L=K.find("a");G(K);G(I);G(L);var M=K.closest(".js-comp-menu-dropdown");K.insertAfter(M);M.remove();if(K.is(".js-comp-menu-dropdown__content--main-menu")){A(K,O)}}}function D(){var I=E(".js-comp-menu-horizontal");if(I.length){var K=E("body"),J=K.is(".l-small"),H=K.is(".l-xsmall");I.each(function(L){var O=E(this),N=O.find("li").not(".b-post-control--disabled").length;var M=((J&&O.is(".js-comp-menu--dropdown-on-small"))||(H&&O.is(".js-comp-menu--dropdown-on-xsmall")));if(M&&N>0){if(!O.data("is-dropdown-menu")){C(O,"dropdown");O.data("is-dropdown-menu","1")}}else{if(O.data("is-dropdown-menu")){C(O,"horizontal");O.data("is-dropdown-menu","")}}})}}function F(){D();vBulletin.Responsive.Debounce.registerCallback(D)}E(F)})(jQuery);